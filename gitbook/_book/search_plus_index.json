{"./":{"url":"./","title":"é¡¹ç›®ä»‹ç»","keywords":"","body":"é¡¹ç›®ä»‹ç» boot-admin åŸºäºSpringBoot2ã€MyBatisï¼ŒVueå‰åç«¯åˆ†ç¦»ï¼Œè‡ªåŠ¨åŒ–é…ç½®ï¼Œé€šè¿‡å°è£…ä¸€ç³»åˆ—Starterï¼Œå¿«é€Ÿç”Ÿæˆè„šæ‰‹æ¶ é¡¹ç›®ã€åå°ç®¡ç†ç³»ç»Ÿ é¡¹ç›®æºç  æºç  åç«¯ å‰ç«¯ gitee https://gitee.com/miaoyinjun/boot-admin https://gitee.com/miaoyinjun/boot-admin-ui github https://github.com/miaoyinjun/boot-admin https://github.com/miaoyinjun/boot-admin-ui ç‰¹åˆ«é¸£è°¢ æ„Ÿè°¢eladmin å…è®¸åœ¨åŸºç¡€ä¸šåŠ¡åŠŸèƒ½ä¸Šè¿›è¡Œæ‰©å±• eladminä½œä¸ºç‹¬ç«‹æ¨¡å—å¼•å…¥ï¼Œå¹¶ä½œäº†ä»¥ä¸‹æ‰©å±• åç«¯å…¨éƒ¨é‡å†™ï¼ŒåŸä¸šåŠ¡é€»è¾‘ä¿ç•™ï¼ŒMybatisæ›¿æ¢JPA æ–°çš„æ³¨é‡Šå’Œä»£ç è§„èŒƒ å¼•å…¥äº†æ–°çš„æ—¥å¿—æ¨¡å—mzt-biz-log ï¼Œå¹¶åšäº†æ‰©å±• åŒæ—¶æ”¯æŒè´¦å·å¯†ç ä¸çŸ­ä¿¡ç™»å½•ï¼Œå¯å†æ‰©å±•å…¶å®ƒæ–¹å¼ç™»å½• å¼•å…¥liquibaseæ§åˆ¶æ•°æ®åº“ç»“æ„å˜åŒ–ï¼Œæ”¯æŒå›æ»š è¡Œåˆ—æ•°æ®çº§åˆ«æƒé™æ§åˆ¶ å¢åŠ æ³¨è§£ï¼Œå…¥å‚è§£å¯†ï¼Œå‡ºå‚åŠ å¯†ï¼Œä¸¾ä¾‹ï¼šè¿”å›idä¸»é”®åŠ å¯†ï¼Œä¿è¯æ•°æ®å®‰å…¨ å¼•å…¥SpringBootAdminï¼ŒæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯éƒ½ä¸ºå½“å‰æœåŠ¡ï¼Œéå¼€å‘æ¨¡å¼å¿…é¡»ç™»å½•æ‰èƒ½ä½¿ç”¨ï¼Œå¯æŸ¥çœ‹gitæœ€åä¸€æ¬¡çš„æäº¤ä¿¡æ¯ï¼Œç”¨äºéªŒè¯é¡¹ç›®ç‰ˆæœ¬æ˜¯å¦æ­£ç¡® å¼•å…¥knife4jæ›¿æ¢åŸswaggerï¼Œå¹¶å¢åŠ äº†æšä¸¾æ”¯æŒï¼Œå¯åœ¨apiæ–‡æ¡£ç•Œé¢ä¸‹æ‹‰é€‰æ‹©æšä¸¾ å¢åŠ è´¦å·è¿‡æœŸã€å¯†ç è¿‡æœŸã€éš”Nå¤©å¼ºåˆ¶ä¿®æ”¹å¯†ç ç­‰æœºåˆ¶ æ”¯æŒå‚æ•°éªŒè¯@RequestParamã€@requestbody å¢åŠ ç‰ˆæœ¬æ§åˆ¶èœå• ä½¿ç”¨vue-admin-beautiful-pro é‡å†™äº†ç™»å½•é¡µé¢ å®šæ—¶å™¨å¢åŠ åˆ†å¸ƒå¼é”ï¼Œé¿å…å¯åŠ¨å¤šä¸ªæœåŠ¡åœºæ™¯ä»»åŠ¡é‡å¤æ‰§è¡Œ crud.jsæ”¯æŒæ‰“å¼€ç¼–è¾‘ç•Œé¢æ—¶å¯è¯·æ±‚è·å–æ•°æ®æ¥å£ å…¶å®ƒè‡ªè¡Œä½“éªŒ æ„Ÿè°¢mouzt æä¾›çš„æ—¥å¿—ç»„ä»¶ TODO é¦–é¡µ-ç›‘æ§ï¼Œpvï¼Œuv å‰ç«¯-æ¸…é™¤ç¼“å­˜ åç«¯è¿”å›èœå•ä¼˜åŒ– é›†æˆspringCloud k8s istio "},"directory/UNDERSTAND.html":{"url":"directory/UNDERSTAND.html","title":"å¿«é€Ÿäº†è§£","keywords":"","body":"å¿«é€Ÿäº†è§£ åç«¯ æŠ€æœ¯ åç§° è¯´æ˜ springBoot springBootæ¡†æ¶ spring Security å®‰å…¨æ¡†æ¶ æƒé™è®¤è¯ mybatis plus mybatiså¢å¼º å¢å¼ºå¯¹æ•°æ®åº“æ“ä½œå·¥å…· Druid æ•°æ®åº“è¿æ¥æ±  æä¾›ç›‘æ§ knife4j swaggeræ¥å£æ–‡æ¡£å¢å¼º MapStruct Beanæ˜ å°„å·¥å…· jetCache é€šç”¨ç¼“å­˜æ¡†æ¶ liquibase ç®¡ç†æ•°æ®åº“å˜åŒ–å·¥å…· è·Ÿè¸ª,ç®¡ç†å’Œåº”ç”¨æ•°æ®åº“å˜åŒ–çš„æ•°æ®åº“é‡æ„å·¥å…· p6spy SQLæ—¥å¿—æ‰“å°å·¥å…· spring-boot-admin ç®¡ç†å’Œç›‘æ§SpringBootåº”ç”¨ç¨‹åº jasypt é…ç½®æ–‡ä»¶åŠ å¯† lombok ç”ŸæˆPOJOçš„getter/setter hutool å·¥å…·ç±»åº“ logback æ—¥å¿—æ¡†æ¶ xxl-job åˆ†å¸ƒå¼å®šæ—¶æ¡†æ¶ jgitflow-maven-plugin ç®€åŒ–å®ç°git flowå·¥ä½œæµç¨‹æ’ä»¶ git-commit-id-plugin git commitä¿¡æ¯æ”¶é›†æ’ä»¶ mavenæ‰“jaråŒ…æ—¶å¸¦ä¸Š git commitç›¸å…³ä¿¡æ¯ maven-javadoc-plugin javadocæ’ä»¶ æ£€æŸ¥ï¼Œå¡«å……éƒ¨åˆ†æ³¨é‡Šä¿¡æ¯ screw-maven-plugin æ•°æ®åº“æ–‡æ¡£ç”Ÿæˆæ’ä»¶ springloaded çƒ­éƒ¨ç½²æ’ä»¶ æ¨¡å—è¯´æ˜ boot-admin boot-admin-parent -- çˆ¶æ¨¡å— boot-admin-common -- é€šç”¨å®šä¹‰ boot-admin-eladmin -- åŸºç¡€ä¸šåŠ¡ boot-admin-eladmin-generator -- ä»£ç ç”Ÿæˆ boot-admin-eladmin-logging -- æ—¥å¿— boot-admin-eladmin-system -- ç³»ç»Ÿ boot-admin-eladmin-tools -- å·¥å…· boot-admin-starters -- ç»„ä»¶å¢å¼º boot-admin-cache-starter -- ç¼“å­˜ boot-admin-core-starter -- æ ¸å¿ƒ boot-admin-filter-starter -- å®‰å…¨è¿‡æ»¤å™¨ boot-admin-jackson-starter -- jacksonå®šä¹‰ boot-admin-log-starter -- æ—¥å¿— boot-admin-mybatis-starter -- mybatiså®šä¹‰ boot-admin-sba-starter -- spring-boot-adminå¢å¼º boot-admin-security-starter -- å®‰å…¨ boot-admin-swagger-starter -- swaggerå¢å¼º boot-admin-ui -- å‰ç«¯ boot-admin-web-demo -- æ¼”ç¤º "},"directory/START.html":{"url":"directory/START.html","title":"å¿«é€Ÿå¼€å§‹","keywords":"","body":"å¿«é€Ÿäº†è§£ å¼€å‘ç¯å¢ƒ è¯­è¨€ï¼šJava 8 IDE(JAVA)ï¼š IDEA å®‰è£…lombokæ’ä»¶ ä¾èµ–ç®¡ç†ï¼šMaven æ•°æ®åº“ï¼šMySQL5.7+ ç¼“å­˜ï¼šRedis è·å–æºç  è·å–åç«¯æºç  $ git clone https://gitee.com/miaoyinjun/boot-admin è·å–å‰ç«¯æºç  $ git clone https://gitee.com/miaoyinjun/boot-admin-ui æœ¬åœ° 1. åˆ›å»ºæ•°æ®åº“ CREATE DATABASE IF NOT EXISTS `boot-admin` CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci; 2. ç¯å¢ƒå˜é‡é…ç½® é…ç½®æ–‡ä»¶ä¸å‚æ•°2ç§ï¼Œä»»é€‰ä¸€ç§é…ç½®æ–¹å¼ é…ç½®æ–‡ä»¶æ–¹å¼ï¼ˆæ¨èï¼‰ ç¼–è¾‘ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨åº•éƒ¨å†™å…¥ä»¥ä¸‹é…ç½®ï¼Œå‚è€ƒç³»ç»Ÿç¯å¢ƒå˜é‡ æ‰“å¼€é…ç½®æ–‡ä»¶ $ vim ~/.bash_profile #mysql export BOOT_ADMIN_DB_HOST=\"\" #é»˜è®¤localhost export BOOT_ADMIN_DB_DATABASE=\"\" #é»˜è®¤boot-admin export BOOT_ADMIN_DB_UNAME=\"\" #é»˜è®¤root export BOOT_ADMIN_DB_PASSWORD=\"\" #é»˜è®¤ä¸ºç©º export BOOT_ADMIN_DB_PORT=\"\" #é»˜è®¤3306 #redis export BOOT_ADMIN_REDIS_DB=\"\" #é»˜è®¤1 export BOOT_ADMIN_REDIS_HOST=\"\" #é»˜è®¤localhost export BOOT_ADMIN_REDIS_PORT=\"\" #é»˜è®¤redis export BOOT_ADMIN_REDIS_PASSWORD=\"16379\" #é»˜è®¤6379 ä½¿å…¶ç”Ÿæ•ˆ $ source ~/.bash_profile å‚æ•°æ–¹å¼ mavenã€jarä»¥-Dåæ¥å˜é‡å=å˜é‡å€¼ä¼ é€’ç¯å¢ƒå˜é‡ mainï¼šBOOT_ADMIN_DB_HOST=\"localhost\";BOOT_ADMIN_DB_PASSWORD=\"123\"; mavenï¼šmvn spring-boot:run -DBOOT_ADMIN_DB_HOST=localhost -DBOOT_ADMIN_DB_PASSWORD=123 jarï¼šjava -jar -DBOOT_ADMIN_DB_HOST=localhost -DBOOT_ADMIN_DB_PASSWORD=123 3. åç«¯è¿è¡Œ IDEAæ–¹å¼ mavenæ–¹å¼ åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½• $ cd boot-admin å®‰è£…å¿…è¦ä¾èµ– $ cd boot-admin-parent && mvn clean install è¿è¡Œdemo $ cd ../ && cd boot-admin-web-demo && mvn clean compile spring-boot:run è®¿é—®æ¥å£æ–‡æ¡£ï¼šhttp://localhost:8801/sba/api/doc.html 4. å‰ç«¯è¿è¡Œ åˆ‡æ¢ç›®å½• $ cd boot-admin-ui å®‰è£…ä¾èµ– $ npm i è¿è¡Œ $ npm run dev è®¿é—®https://localhost:8013/ ç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼š123456 DOCKER å‰å°è¿è¡Œï¼Œæ–¹ä¾¿æŸ¥çœ‹æ—¥å¿— 1. åç«¯ åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½• $ cd boot-admin å®‰è£…å¿…è¦ä¾èµ– $ cd boot-admin-parent && mvn clean install $ cd ../ && cd boot-admin-web-demo $ mvn clean install && mvn clean install && mvn dockerfile:build && docker-compose -f ./docker/docker-compose.yml --env-file=./docker/.env up è®¿é—®æ¥å£æ–‡æ¡£åœ°å€ï¼šhttp://localhost:8801/sba/api/doc.html 2. å‰ç«¯ $ cd ../ && cd boot-admin-ui $ npm i && npm run build:docker && docker-compose -f ./docker/docker-compose.yml --env-file=./docker/.env up è®¿é—®http://localhost ç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼š123456 "},"directory/HTTP.html":{"url":"directory/HTTP.html","title":"æ¥å£å®šä¹‰","keywords":"","body":"æ¥å£HTTPå®šä¹‰ è¯·æ±‚æ–¹æ³• GETï¼šä»æœåŠ¡å™¨å–å‡ºèµ„æº POSTï¼šåœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æº PUTï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æº DELETEï¼šä»æœåŠ¡å™¨åˆ é™¤èµ„æº æƒé™è®¤è¯ Headerå‚æ•°ï¼šAuthorizationï¼Œå†…å®¹ï¼šBerear xxx å“åº” HTTPçŠ¶æ€ç  è¯´æ˜ 200 å“åº”æ­£ç¡® 500 æœåŠ¡å†…éƒ¨é”™è¯¯ 400 éªŒè¯é”™è¯¯ 401 æœªæˆæƒ 403 æ‹’ç»è®¿é—® å­—æ®µè¯´æ˜ å­—æ®µ è¯´æ˜ code message æ¶ˆæ¯ data æ•°æ® codeè¯´æ˜ code è¯´æ˜ HTTPçŠ¶æ€ç  2001 success 200 5001 å†…éƒ¨é”™è¯¯ 500 4001 å‚æ•°é”™è¯¯ 400 4002 ä¸šåŠ¡éªŒè¯é”™è¯¯ 400 4003 è¯·æ±‚è¶…æ—¶ 400 4004 ç­¾åé”™è¯¯ 400 4005 è¯·ä¸è¦é¢‘ç¹æ“ä½œ 400 4006 ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ 400 4007 è´¦æˆ·å·²è¢«ç¦ç”¨ 400 4008 è´¦æˆ·è¢«é”å®š 400 4009 è´¦æˆ·è¿‡æœŸ 400 4010 å¯†ç è¿‡æœŸ 400 4011 æœªæˆæƒæˆ–æˆæƒè¿‡æœŸ 401 4012 æˆæƒè¿‡æœŸ 401 4013 æ‰¾ä¸åˆ°è®¤è¯ä¿¡æ¯ 401 4031 ä¸å…è®¸è®¿é—® 403 å…¨å±€å¯¹è¿”å›nullçš„å¤„ç† åç«¯å¯ä½¿ç”¨æ³¨è§£@JacksonAllowNullå…è®¸å­—æ®µè¿”å›null ç±»å‹ é»˜è®¤è¿”å›å€¼ é»˜è®¤å¤„ç† String \"\" æ—  Boolean false æ—  Integer,Float,Double,BigDecimal 0 æ—  Long 0 æ—  Array,List,Set [] æ—  Date null FORMAT('yyyy-MM-dd HH:mm:ss'), timeZone(GMT+8) ç¤ºä¾‹ { \"code\": 200, \"message\": \"æ“ä½œæˆåŠŸ\", \"data\": [ { \"plfName\": \"1\", \"goodId\": \"2\", \"goodUrl\": \"3\" } ] } "},"directory/GIT.html":{"url":"directory/GIT.html","title":"åˆ†æ”¯ç®¡ç†","keywords":"","body":"åˆ†æ”¯ç®¡ç† è¿™é‡Œç®€åŒ–äº†git flowçš„æµç¨‹ï¼Œä¸­é—´å¯èƒ½äº§ç”Ÿçš„åˆå¹¶å†²çªè¯·æ‰‹åŠ¨è§£å†³ ç‰ˆæœ¬å· ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚ åˆ†æ”¯ masterï¼Œdemoå’Œprodç¯å¢ƒ developï¼Œdevå’Œqaç¯å¢ƒ åç«¯ Release æµç¨‹ åœºæ™¯ï¼šåˆå¹¶æµ‹è¯•åˆ†æ”¯ä¸ç”Ÿäº§åˆ†æ”¯ è¿‡ç¨‹ï¼šåˆå¹¶developåˆ†æ”¯åˆ°masteråˆ†æ”¯ä¸Šï¼Œå¹¶æ‰“tag ç¡®ä¿æœ¬åœ°developã€masteråˆ†æ”¯ä¸Šæ²¡æœ‰æœªæäº¤çš„ä»£ç ï¼Œå¹¶ä¸”ä¸ºæœ€æ–°ï¼Œå¦åˆ™ä¼šå¤±è´¥ åˆ‡æ¢åˆ°developåˆ†æ”¯ $ git checkout develop äº§ç”Ÿreleaseåˆ†æ”¯ $ mvn jgitflow:release-start åˆå¹¶releaseåˆ†æ”¯åˆ°developå’Œmasteråˆ†æ”¯ä¸Šï¼Œå¹¶pushï¼Œtagï¼Œåˆå¹¶åä¼šåˆ é™¤release/*åˆ†æ”¯ï¼Œå‘å¸ƒdemoç¯å¢ƒåšéªŒè¯ $ mvn jgitflow:release-finish Hotfix æµç¨‹ åœºæ™¯ï¼šåœ¨ç”Ÿäº§åˆ†æ”¯ä¸Šåšç´§æ€¥ä¿®å¤ è¿‡ç¨‹ï¼šä»masteråˆ†æ”¯å»ºç«‹hotfixåˆ†æ”¯ï¼Œåœ¨hotfixåˆ†æ”¯ä¸Šåšä¿®æ”¹ï¼Œåå°†hotfixåˆ†æ”¯åˆå¹¶developåˆ†æ”¯åˆ°masteråˆ†æ”¯ä¸Šï¼Œå¹¶æ‰“tag ç¡®ä¿æœ¬åœ°developã€masteråˆ†æ”¯ä¸Šæ²¡æœ‰æœªæäº¤çš„ä»£ç ï¼Œå¹¶ä¸”ä¸ºæœ€æ–°ï¼Œå¦åˆ™ä¼šå¤±è´¥ åˆ‡æ¢åˆ°masteråˆ†æ”¯ $ git checkout master äº§ç”Ÿhotfixåˆ†æ”¯ $ mvn jgitflow:hotfix-start åœ¨æ­¤åˆ†æ”¯ä¸Šåšå¼€å‘pushï¼Œå°†jenkinsçš„demoç¯å¢ƒåˆ†æ”¯ä¸´æ—¶ä¿®æ”¹ä¸ºhotfixåˆ†æ”¯ï¼Œå‘å¸ƒdemoç¯å¢ƒåšéªŒè¯ $ git push --set-upstream origin hotfix/$VERSION åˆå¹¶hotfixåˆ†æ”¯åˆ°developå’Œmasteråˆ†æ”¯ä¸Šï¼Œå¹¶pushï¼Œtagï¼Œåˆå¹¶åä¼šåˆ é™¤hotfix/*åˆ†æ”¯ï¼Œæœ€åå‘å¸ƒprodç¯å¢ƒ $ mvn jgitflow:hotfix-finish å°†jenkinsçš„demoç¯å¢ƒçš„åˆ†æ”¯ä¿®æ”¹ä¸ºmaster å‰ç«¯ Release æµç¨‹ åœºæ™¯ï¼šåˆå¹¶æµ‹è¯•åˆ†æ”¯ä¸ç”Ÿäº§åˆ†æ”¯ è¿‡ç¨‹ï¼šåˆå¹¶developåˆ†æ”¯åˆ°masteråˆ†æ”¯ä¸Šï¼Œå¹¶æ‰“tag ç¡®ä¿æœ¬åœ°developã€masteråˆ†æ”¯ä¸Šæ²¡æœ‰æœªæäº¤çš„ä»£ç ï¼Œå¹¶ä¸”ä¸ºæœ€æ–°ï¼Œå¦åˆ™ä¼šå¤±è´¥ é¦–æ¬¡ä½¿ç”¨ $ git flow init è®¾ç½®ç‰ˆæœ¬å· $ VERSION= åˆ‡æ¢åˆ°developåˆ†æ”¯ $ git checkout develop äº§ç”Ÿreleaseåˆ†æ”¯ $ git flow release start $VERSION åˆå¹¶releaseåˆ†æ”¯åˆ°developå’Œmasteråˆ†æ”¯ä¸Šï¼Œåˆå¹¶åä¼šåˆ é™¤release/*åˆ†æ”¯ $ git flow release finish $VERSION push åˆ°masteråˆ†æ”¯ï¼Œæ‰“tag 1. $ git push && git push --tags push developåˆ†æ”¯ï¼Œå‘å¸ƒdemoç¯å¢ƒåšéªŒè¯ $ git checkout develop && git push Hotfix æµç¨‹ åœºæ™¯ï¼šåœ¨ç”Ÿäº§åˆ†æ”¯ä¸Šåšç´§æ€¥ä¿®å¤ è¿‡ç¨‹ï¼šä»masteråˆ†æ”¯å»ºç«‹hotfixåˆ†æ”¯ï¼Œåœ¨hotfixåˆ†æ”¯ä¸Šåšä¿®æ”¹ï¼Œåå°†hotfixåˆ†æ”¯åˆå¹¶developåˆ†æ”¯åˆ°masteråˆ†æ”¯ä¸Šï¼Œå¹¶æ‰“tag ç¡®ä¿æœ¬åœ°developã€masteråˆ†æ”¯ä¸Šæ²¡æœ‰æœªæäº¤çš„ä»£ç ï¼Œå¹¶ä¸”ä¸ºæœ€æ–°ï¼Œå¦åˆ™ä¼šå¤±è´¥ è®¾ç½®ç‰ˆæœ¬å· $ VERSION= åˆ‡æ¢åˆ°masteråˆ†æ”¯ $ git checkout master äº§ç”Ÿhotfixåˆ†æ”¯ $ git flow hotfix start $VERSION åœ¨æ­¤åˆ†æ”¯ä¸Šåšå¼€å‘pushï¼Œå°†jenkinsçš„demoç¯å¢ƒåˆ†æ”¯ä¸´æ—¶ä¿®æ”¹ä¸ºhotfixåˆ†æ”¯ï¼Œå‘å¸ƒdemoç¯å¢ƒåšéªŒè¯ $ git push --set-upstream origin hotfix/$VERSION åˆå¹¶hotfixåˆ†æ”¯åˆ°developå’Œmasteråˆ†æ”¯ä¸Š $ git checkout hotfix/$VERSION $ git flow hotfix finish $VERSION push developåˆ†æ”¯ $ git checkout develop && git push push åˆ°masteråˆ†æ”¯ï¼Œæ‰“tagï¼Œåˆå¹¶åä¼šåˆ é™¤hotfix/*åˆ†æ”¯ï¼Œæœ€åå‘å¸ƒprodç¯å¢ƒ $ git checkout master && git push && git push --tags && git push origin --delete hotfix/$VERSION å°†jenkinsçš„demoç¯å¢ƒçš„åˆ†æ”¯ä¿®æ”¹ä¸ºmaster åˆå¹¶ç‹¬ç«‹æäº¤ å¦‚æœéœ€è¦å°†å…¶å®ƒåˆ†æ”¯çš„commitç‹¬ç«‹åˆå¹¶åˆ°hotfixåˆ†æ”¯ï¼Œå¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ å¦‚æœè¦å°†å¤šä¸ªæäº¤æ‰“åˆ°hot fix ä¸Šï¼Œé‡å¤è¯¥æ­¥éª¤ $ git cherry-pick "},"directory/SERVER.html":{"url":"directory/SERVER.html","title":"æœåŠ¡å™¨ç¯å¢ƒé…ç½®","keywords":"","body":"æœåŠ¡å™¨ç¯å¢ƒé…ç½® nginx ç¦»çº¿å®‰è£… ä¸Šä¼ nginx-1.18.0-2.el7.ngx.x86_64.rpmåˆ°/optç›®å½•ä¸‹ å®‰è£… cd /opt rpm -ivh nginx-1.18.0-2.el7.ngx.x86_64.rpm systemctl start nginx systemctl enable nginx setsebool -P httpd_can_network_connect 1 curl http://localhost:80 é…ç½® ä¸Šä¼ nginx.confåˆ°/etc/nginxç›®å½•ä¸‹ ä¸Šä¼ ui.confåˆ°/etc/nginx/conf.dç›®å½•ä¸‹ ä¸Šä¼ cert åˆ°/etc/nginxä¸‹ é…ç½® $ cd /etc/nginx/conf.d && rm -rf default.conf && nginx -s reload redis ç¦»çº¿å®‰è£… ä¸Šä¼ jemalloc-3.6.0-1.el7.x86_64.rpmã€rpm -ivh redis-3.2.12-2.el7.x86_64.rpmåˆ°/optç›®å½• å®‰è£… $ rpm -ivh jemalloc-3.6.0-1.el7.x86_64.rpm && rpm -ivh redis-3.2.12-2.el7.x86_64.rpm å¯åŠ¨ $ systemctl enable redis && systemctl start redis é…ç½® $ vim /etc/redis.conf è®¾ç½®å¦‚ä¸‹ requirepass \"xxxxx\" bind 0.0.0.0 port 16379 é‡å¯ $ systemctl restart redis mysql rootè´¦å·è¿æ¥ mysql -uroot -p åˆ›å»ºæ•°æ®åº“boot-admin CREATE DATABASE IF NOT EXISTS `boot-admin` CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci; åˆ›å»ºç”¨æˆ·boot-adminï¼Œè¯»å†™å’Œåªè¯»è´¦å· CREATE USER 'boot-admin_rw'@'%' IDENTIFIED BY '11111'; GRANT ALL ON ta.* TO 'ta_rw'@'%â€™; CREATE USER 'boot-admin_ro'@'%' IDENTIFIED BY '22222'; GRANT SElECT ON ta.* TO 'ta_ro'@'%'; "},"directory/BEST-PRACTICES.html":{"url":"directory/BEST-PRACTICES.html","title":"æœ€ä½³å®è·µ","keywords":"","body":"æœ€ä½³å®è·µ mavenç§ä»“ å·²æ­å»ºå¥½mavenç§æœ‰ä»“åº“ æœ¬åœ°settings.xmlæ–‡ä»¶é…ç½®å¥½å‘å¸ƒmavençš„ç”¨æˆ· åˆ‡æ¢åˆ°boot-admin-parentç›®å½• $ cd boot-admin-parent å‘å¸ƒSNAPSHOTç‰ˆæœ¬ï¼Œå¯é‡å¤å‘å¸ƒ $ git checkout develop && $ mvn verify install:install deploy:deploy å‘å¸ƒRELEASEç‰ˆæœ¬ï¼Œä¸å¯é‡å¤å‘å¸ƒ åˆå¹¶developåˆ°masteråˆ†æ”¯ä¸Šï¼Œå¹¶åˆ é™¤pom.xmlé‡Œçš„-SNAPSHOTæ ‡è®° $ git checkout develop && mvn jgitflow:release-start && mvn jgitflow:release-finish å‘å¸ƒ $ git checkout master && $ mvn verify install:install deploy:deploy å®Œæˆ å¼€å‘ å¤åˆ¶boot-admin-web-demoå¹¶ä¸Šä¼ åˆ°gitç§åº“ä¸Š ä»gitç§åº“ä¸Šå…‹éš†å‡ºboot-admin-web-demoï¼Œå¹¶åˆ‡æ¢åˆ°developåˆ†æ”¯ä¸Š $ git clone https://gitlab.xxx.com/boot-admin-web-demo.git && git checkout develop é…ç½®BOOT_ADMIN_MAVEN_URLç¯å¢ƒå˜é‡ IDEAå¯¼å…¥boot-admin-web-demo å‚è€ƒliquibaseçš„æ·»åŠ é¡ºåºï¼Œå»ºè¡¨ è¿è¡ŒApplication.mainï¼Œå‚è€ƒä»£ç ç”Ÿæˆï¼Œç”ŸæˆCRUDä»£ç  åˆ†æ”¯ç‰ˆæœ¬æ§åˆ¶å‚è€ƒåˆ†æ”¯ç®¡ç† åç«¯éƒ¨ç½² jenkins é…ç½®BOOT_ADMIN_MAVEN_URLç¯å¢ƒå˜é‡ å‚è€ƒæœåŠ¡å™¨ç¯å¢ƒé…ç½®ï¼Œç¡®ä¿redisï¼Œmysqlç¯å¢ƒå·²ç»å‡†å¤‡ å¤åˆ¶é‡å¯è„šæœ¬boot-admin-web-demo/linux/restart.shåˆ°LinuxæœåŠ¡å™¨ç›¸åº”ç›®å½•ä¸‹ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œä¿®æ”¹ å¢åŠ è¿è¡Œæƒé™ $ chmod +x restart.sh é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¯é…ç½®çš„æœ‰ç³»ç»Ÿç¯å¢ƒå˜é‡ æ‰“å¼€é…ç½®æ–‡ä»¶ $ vim ~/.bash_profile #mysql export BOOT_ADMIN_DB_HOST=\"\" #é»˜è®¤localhost export BOOT_ADMIN_DB_DATABASE=\"\" #é»˜è®¤boot-admin export BOOT_ADMIN_DB_UNAME=\"\" #é»˜è®¤root export BOOT_ADMIN_DB_PASSWORD=\"\" #é»˜è®¤ä¸ºç©º export BOOT_ADMIN_DB_PORT=\"\" #é»˜è®¤3306 #redis export BOOT_ADMIN_REDIS_DB=\"\" #é»˜è®¤1 export BOOT_ADMIN_REDIS_HOST=\"\" #é»˜è®¤localhost export BOOT_ADMIN_REDIS_PORT=\"\" #é»˜è®¤redis export BOOT_ADMIN_REDIS_PASSWORD=\"16379\" #é»˜è®¤6379 ä½¿å…¶ç”Ÿæ•ˆ $ source ~/.bash_profile ä½¿ç”¨jenkinså°†boot-admin-web-demo.jarå¤åˆ¶åˆ°LinuxæœåŠ¡å™¨ï¼Œè°ƒç”¨restart.shå¯åŠ¨ $ clean package Send build artifacts over SSH Source filesï¼štarget/*.jar Remove prefixï¼štarget Remote directoryï¼š/home/user1/boot-admin-web/tmp/ Exec command cd /home/user1/boot-admin-web/ mv -f boot-admin-web.jar boot-admin-web.jar.bak cp -rf ./tmp/*.jar ./ ./restart.sh ç®¡ç†å‘˜ç™»å½•ç³»ç»Ÿï¼Œç³»ç»Ÿç®¡ç†/ç‰ˆæœ¬ç®¡ç†ï¼Œæ–°å»ºç‰ˆæœ¬ï¼Œæ¿€æ´» å‰ç«¯éƒ¨ç½² å‡†å¤‡nginxç¯å¢ƒå‚è€ƒæœåŠ¡å™¨ç¯å¢ƒé…ç½® jenkinsæ‰“åŒ… $ npm install && npm run build:prod jenkinséƒ¨ç½²Send build artifacts over SSH Source filesï¼šdist/ Remove prefixï¼šdist/ Remote directoryï¼š/etc/nginx/boot-admin-ui-tmp/ Exec command $ cd /etc/nginx/ $ rm -rf boot-admin-ui-bak $ mv -f boot-admin-ui boot-admin-ui-bak $ mv -f boot-admin-ui-tmp boot-admin-ui "},"directory/FAQ.html":{"url":"directory/FAQ.html","title":"FAQ","keywords":"","body":"å¸¸è§é—®é¢˜ Application.mainä¸$ mvn spring-boot:runæ–¹å¼è¿è¡ŒåŒºåˆ« Application.mainè¿è¡Œï¼Œdevç¯å¢ƒæ¨è ä¸boot-admin-parenté›†æˆå¼€å‘æ—¶ï¼Œä¿®æ”¹boot-admin-parentä»£ç åï¼Œä¸éœ€è¦install $ mvn spring-boot:runè¿è¡Œ ä¸boot-admin-parenté›†æˆå¼€å‘æ—¶ï¼Œä¿®æ”¹boot-admin-parentä»£ç åï¼Œéœ€è¦install @AdminRestControllerä¸@ApiRestControlleråŒºåˆ«? ä¸ºäº†åŒºåˆ†å“ªäº›æ˜¯åŸºç¡€åŠŸèƒ½çš„urlï¼Œ @AdminRestControllerä¼šç”Ÿæˆ/api/adminçš„å‰ç¼€çš„urlï¼ŒåŸºç¡€åŠŸèƒ½æ¥å£ @ApiRestControlleråªä¼šç”Ÿæˆ/api/çš„å‰ç¼€çš„urlï¼Œæ–°å¼€å‘çš„æ¥å£ BaseEntityä¸BaseEntityLogicDeleteåŒºåˆ«ï¼Ÿ ä¸éœ€è¦é€»è¾‘åˆ é™¤è¡¨çš„DOç±»ç»§æ‰¿BaseEntity éœ€è¦é€»è¾‘åˆ é™¤è¡¨çš„DOç±»ç»§æ‰¿BaseEntityLogicDelete å‰ç¼€/api/adminå¼€å¤´çš„ï¼Œä¸ºä»€ä¹ˆåœ¨knife4jæ¥å£æ–‡æ¡£ä¸­çœ‹ä¸åˆ° å› /api/adminå‰ç¼€ä¸‹çš„ä¸ºåŸºç¡€åŠŸèƒ½ æ‰€æœ‰æ¥å£ä¸å‰ç«¯å¯¹æ¥å®Œæˆï¼Œå¾ˆå°‘æ¶‰åŠåˆ°ä¿®æ”¹ è®©å¼€å‘è€…ä¸“æ³¨äºæ–°åŠŸèƒ½çš„å¼€å‘ï¼Œæ²¡æœ‰å¿…è¦æš´éœ²å‡ºæ¥ é…ç½®boot.admin.swagger.ignore-filter-pathå¯æ”¾å¼€/api/admin application.xmlé»˜è®¤é…ç½®@@é—®é¢˜ application.ymlç»Ÿä¸€è·å–mavençš„é…ç½®ä¿¡æ¯ï¼Œé¡¹ç›®ä¿¡æ¯ä¸éœ€è¦åœ¨application.xmlä¸pom.xmlåˆ†åˆ«é…ç½®2é spring: application: name: \"@project.name@\" #è·å–mavenå±æ€§åœ¨åº”ç”¨ç•Œé¢ä¸ç»†èŠ‚/ä¿¡æ¯å¯è·å–åˆ° info: name: \"@project.name@\" description: \"@project.description@\" version: \"@project.version@\" parentå¼•å…¥æ–¹å¼ æ²¡æœ‰ä½¿ç”¨importæ–¹å¼ï¼Œæ˜¯å› importä¼šå¯¼è‡´propertiesä¸pluginsé‡Œçš„é…ç½®å¤±æ•ˆã€‚ "},"frontend/vue-element-admin.html":{"url":"frontend/vue-element-admin.html","title":"å‰ç«¯å¼€å‘","keywords":"","body":"æ¡†æ¶è¯´æ˜ https://github.com/PanJiaChen/vue-element-admin/blob/master/README.zh-CN.md "},"backend/PROJECT.html":{"url":"backend/PROJECT.html","title":"ä»£ç è§„èŒƒ","keywords":"","body":"ä»£ç è§„èŒƒ é˜¿é‡Œä»£ç è§„èŒƒæ–‡æ¡£ https://miaoyj.oss-cn-shanghai.aliyuncs.com/alijava.pdf é¡¹ç›®ç»“æ„ com.boot.admin.${projectName} constant--å¸¸é‡ ${æ¨¡å—å}/api dto - ä¼ è¾“ç±»ï¼ˆå…¥å‚ï¼‰ vo - è¾“å‡ºç±»ï¼ˆå‡ºå‚ï¼‰ enums - æšä¸¾ç±» ${æ¨¡å—å}/ domain - DO function - æ—¥å¿—è½¬æ¢ mapper - mybatis mapper\\xml mapstruct - å¯¹è±¡è½¬æ¢ rest - æ§åˆ¶å™¨ service - ä¸šåŠ¡å®ç° ä»£ç è§„èŒƒæ£€æŸ¥é¡¹ POJO DOï¼šæ•°æ®åº“æ“ä½œè¡¨ç±» DTOï¼šå…¥å‚ VOï¼šå‡ºå‚ ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„ POJO ç±»å±æ€§å¿…é¡»ä½¿ç”¨åŒ…è£…æ•°æ®ç±»å‹ å¦‚æœå‚æ•°å€¼æ˜¯å›ºå®šçš„æŸäº›å€¼ï¼Œå¦‚ï¼šåˆ é™¤çŠ¶æ€ã€æ¿€æ´»çŠ¶æ€ç­‰ï¼Œè¦å®šä¹‰æšä¸¾ç±» Controller åŸºç¡€urlä¸ºå¤æ•°ï¼Œä¸‹åˆ’çº¿åˆ†å‰²ï¼Œå¦‚ï¼š@ApiRestController(\"students\") å•ä¸ªè¯·æ±‚çš„ä»£ç ä¿æŒ2è¡Œå·¦å³ï¼Œå…·ä½“å®ç°ç”±serviceå¤„ç† swaggerå®šä¹‰æ£€æŸ¥å†…å®¹ å‡ºå…¥å‚æ˜¯å¦åˆç†ï¼Œä¸è¦å®šä¹‰Mapï¼ŒObjectç­‰æ²¡æœ‰åŒ…å«swaggeræ³¨è§£è¯´æ˜çš„å‚æ•° å‚æ•°éªŒè¯ï¼Œæšä¸¾ã€éç©ºï¼Œé•¿åº¦ç­‰ tagså…³è”ç‰ˆæœ¬å· å‡ºå…¥å‚å…¨éƒ¨å®šä¹‰åœ¨apiæ¨¡å— åªå…è®¸è°ƒç”¨serviceå¤„ç†ï¼Œä¸å…è®¸å¼•å…¥mapperï¼ŒDOç­‰ å®šä¹‰æšä¸¾å¤„ç†å›ºå®šçš„æŸäº›å€¼ï¼Œå¦‚ï¼šåŠ¨æ€æ’åºï¼ŒçŠ¶æ€ç­‰ Service å¤–éƒ¨è°ƒç”¨çš„æ–¹æ³•ï¼Œå‡º/å…¥å‚ä¸ä¼šä½¿ç”¨DO å•è¡¨CRUDï¼Œä½¿ç”¨BaseServiceå†…æä¾›çš„æ–¹æ³•ï¼Œå¦‚this.removeById(id) è°ƒç”¨mapperå†…çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œå¦‚this.baseMapper.pageVo(page) Service/mapper å±‚æ–¹æ³•å‘½åè§„çº¦ è·å–å•ä¸ªå¯¹è±¡çš„æ–¹æ³•ç”¨ get åšå‰ç¼€ è·å–å¤šä¸ªå¯¹è±¡çš„æ–¹æ³•ç”¨ list åšå‰ç¼€ï¼Œå¤æ•°ç»“å°¾ï¼Œå¦‚:listObjects è·å–ç»Ÿè®¡å€¼çš„æ–¹æ³•ç”¨ count åšå‰ç¼€ æ’å…¥çš„æ–¹æ³•ç”¨ save/insert åšå‰ç¼€ åˆ é™¤çš„æ–¹æ³•ç”¨ remove/delete åšå‰ç¼€ ä¿®æ”¹çš„æ–¹æ³•ç”¨ update åšå‰ç¼€ pageåˆ†é¡µ liquibase æ£€æŸ¥åŠ¨ä½œæ˜¯å¦åŒ…å«å›æ»šè¯­å¥ æäº¤å‰ ä½¿ç”¨IDEAé˜¿é‡Œä»£ç è§„èŒƒæ’ä»¶æ‰«æ æ‰§è¡Œï¼š$ cd boot-admin-web-demo && mvn clean javadoc:fix javadoc:jarï¼Œè‡ªåŠ¨å¡«å……ä»£ç æ³¨é‡Š@versionï¼Œä»£ç æ³¨é‡Šä¸è§„èŒƒä¼šä½¿æ§åˆ¶å°è¾“å‡ºçš„WARNINGï¼Œè¿™æ—¶ä¿®æ”¹å¯¹åº”çš„ä»£ç æ³¨é‡Šï¼Œå†é‡æ–°æ‰§è¡Œå‘½ä»¤ push/pullï¼Œå¦‚é‡åˆ°å†²çªä¼˜å…ˆä½¿ç”¨rebaseï¼Œè€Œä¸æ˜¯merge "},"backend/COMMENT.html":{"url":"backend/COMMENT.html","title":"æ³¨é‡Šè§„èŒƒ","keywords":"","body":"æ³¨é‡Šè§„èŒƒ å¼€å‘å·¥å…·ï¼šIDEA å•è¡Œæ³¨é‡Š /** * TODO */ /** TODO */ // TODO JAVAæ–‡ä»¶-æ³¨é‡Šæ¨¡æ¿é…ç½® èœå•Preferences/Editor/Live Templates é€‰æ‹©é¡¶éƒ¨ By default expand with Enter æ–°å»ºTemplate Groupï¼Œåç§°ï¼šuser å‹¾é€‰ Reformat according to style å¹¶åœ¨userä¸‹æ–°å»ºLive Templateä¸ºccå¡«å…¥ä»¥ä¸‹æ³¨é‡Šæ¨¡æ¿ * * * $END$ * * * @author $user$ * @since $date$ */ Changeä½œç”¨èŒƒå›´å‹¾é€‰java Edit variablesçš„Default Valueåˆ—è®¾ç½®å¦‚ä¸‹ date = date(\"yyyy-MM-dd\") user = user() æ‰“å¼€ä¸€ä¸ªjavaæ–‡ä»¶ï¼Œåœ¨publicä¸Šæ–¹è¾“å…¥ /ccï¼ŒæŒ‰å›è½¦é”®ï¼Œå³å¯ç”Ÿæˆæ³¨é‡Šï¼Œå¡«å…¥æ ‡é¢˜ ç”Ÿæˆç¤ºä¾‹ï¼š /** * * å…¥å£ * * * @author miaoyj * @since 2020-07-09 */ JAVAæ–¹æ³•-æ³¨é‡Šæ¨¡æ¿ èœå•Preferences/Editor/Live Templates é€‰æ‹©é¡¶éƒ¨ By default expand with Enter æ–°å»ºTemplate Groupï¼Œåç§°ï¼šuser å‹¾é€‰ Reformat according to style å¹¶åœ¨userä¸‹æ–°å»ºLive Templateä¸ºmcå¡«å…¥ä»¥ä¸‹æ³¨é‡Šæ¨¡æ¿ * * * $END$ * * $params$$return$ */ Changeä½œç”¨èŒƒå›´å‹¾é€‰java Edit variablesçš„Default Valueåˆ—è®¾ç½®å¦‚ä¸‹ params = groovyScript(\"def result=''; def params=\\\"${_1}\\\".replaceAll('[\\\\\\\\[|\\\\\\\\]|\\\\\\\\s]', '').split(',').toList(); for(i = 0; i 0 && params[0] != '') {result='\\\\n'+result};if(!returnType.toString().equals('void')){return result;};\", methodReturnType(), methodParameters()); date = date(\"yyyy-MM-dd\") user = user() time = time(\"HH:mm\") åœ¨æ–¹æ³•ä¸Šæ–¹è¾“å…¥ /mc + Enterï¼Œå³å¯ç”Ÿæˆæ³¨é‡Šï¼Œå¡«å…¥æ ‡é¢˜ã€å‚æ•°æè¿°ã€è¿”å›æè¿°* ç”Ÿæˆç¤ºä¾‹ï¼š /** * * æ ¹æ®å•†å“åç§°æŸ¥è¯¢åˆ—è¡¨ * * * @param plfName å•†å“åç§° * @return å•†å“åˆ—è¡¨ */ å¸¸é‡æ³¨é‡Šæ¨¡æ¿ ç”Ÿæˆç¤ºä¾‹ï¼š/** å¼€å‘ {@value} */ String DEV = \"dev\"; å­ç±»æˆ–ç»§æ‰¿æ–¹æ³•ä¸éœ€è¦å¢åŠ æ³¨é‡Šï¼Œåœ¨å…¶ä¸Šå¢åŠ ï¼š /** {@inheritDoc} */ "},"backend/HOTDEPLOY.html":{"url":"backend/HOTDEPLOY.html","title":"çƒ­åŠ è½½","keywords":"","body":"çƒ­åŠ è½½ $ mvn spring-boot:runï¼Œå¯åŠ¨é¡¹ç›® IDEA -> èœå•Build -> Build Project æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œå³å¯æŸ¥çœ‹ä¿®æ”¹çš„classè¢«åŠ è½½äº† "},"backend/CACHE.html":{"url":"backend/CACHE.html","title":"ç¼“å­˜æ“ä½œ","keywords":"","body":"ç¼“å­˜æ“ä½œ æ‰€ç”Ÿæˆçš„keyéƒ½ä¼šå¢åŠ å‰ç¼€ æ ¼å¼ï¼š${spring.application.name}:{keyName}ï¼Œä¸¾ä¾‹ï¼šboot-admin-demo:student æ³¨è§£æ–¹å¼ï¼šJetCacheï¼Œæ‰‹åŠ¨æ–¹å¼ï¼šRedisService RedisService å¼•å…¥ä½¿ç”¨ï¼Œå…·ä½“æ“ä½œæ–¹æ³•è¿›å…¥RedisServiceè‡ªè¡ŒæŸ¥çœ‹ @Autowired RedisService redisService; å…³ç³»å‹æ ¼å¼è§„èŒƒ 1: è¡¨å,å¦‚student 2: ä¸»é”®åˆ—å,å¦‚id 3: ä¸»é”®å€¼,å¦‚2,3,4...., a , b ,c 4: ç¬¬4æ®µ,å†™è¦å­˜å‚¨çš„åˆ—å,å¦‚name ä¾‹ï¼šstudent:id:9:name String tableKey = RedisKeyUtil.getKey(\"student\", \"id\", String.valueOf(value3)); redisService.stringSetString(tableKey, value1); tableKey = RedisKeyUtil.getKeyWithColumn(\"student\", \"id\", value2, \"name\"); redisService.stringSetString(tableKey, value1); JetCache æ¶‰åŠè‡ªå®šä¹‰çš„keyï¼Œè¯·å®šä¹‰åœ¨å¸¸é‡æˆ–æšä¸¾é‡Œ https://github.com/alibaba/jetcache/wiki/FAQ_CN https://github.com/alibaba/jetcache/wiki/MethodCache_CN https://github.com/alibaba/jetcache/wiki/CreateCache_CN https://github.com/alibaba/jetcache/pull/474 jetcache ä¸jpaçš„äº‹åŠ¡å†²çªé—®é¢˜ jpa Found shared references to a collection æ–¹æ³•1ï¼šåˆ é™¤äº‹åŠ¡æ³¨è§£ æ–¹æ³•2ï¼šç¼“å­˜æ‰§è¡Œæ”¾åˆ°æœ€å "},"backend/CONVERT.html":{"url":"backend/CONVERT.html","title":"ç±»å‹è½¬æ¢","keywords":"","body":"ç±»å‹è½¬æ¢ Javaå¸¸è§ç±»å‹è½¬æ¢ https://hutool.cn/docs/#/core/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7%E7%B1%BB-Convert MapStruct DO,VOæ˜ å°„ @Mapper(componentModel = \"spring\", unmappedTargetPolicy = ReportingPolicy.IGNORE) public interface StudentMapStruct extends BaseMapStruct { } StudentDO studentDO = this.studentMapStruct.toDO(dto); oriKaMapperå¤‡ç”¨ pojoè½¬æ¢ public List listStudentsByName(String uName) { QueryWrapper queryWrapper = new QueryWrapper(); if (StrUtil.isNotBlank(uName)) { Map map = MapUtil.newHashMap(); map.put(\"name\", uName); queryWrapper.allEq(map); } List list = this.list(queryWrapper); return oriKaMapper.mapAsList(list, StudentVO.class); } è‡ªå®šä¹‰ç±»å‹è½¬æ¢ å®šä¹‰è½¬æ¢å™¨ï¼Œä¸åŒç±»å‹æˆ–ä¸åŒå±æ€§åçš„æ‰‹åŠ¨set ```JAVA /** æµ‹è¯•è‡ªå®šä¹‰è½¬æ¢ * @author miaoyj @version 1.0.9-SNAPSHOT @since 2020-07-09 / @Component public class LoginDtoToLoginVoMapper extends CustomMapper { /** {@inheritDoc} / @Override public void mapAtoB(LoginDTO loginDTO, LoginVO loginVO, MappingContext context) { loginVO.setName(loginDTO.getNickname()); super.mapAtoB(loginDTO, loginVO, context); } /** {@inheritDoc} */ @Override public void mapBtoA(LoginVO loginVO, LoginDTO loginDTO, MappingContext context) { loginDTO.setNickname(loginVO.getName()); super.mapBtoA(loginVO, loginDTO, context); } } > 2. ~~è°ƒç”¨~~ ``` JAVA @Autowired private OriKaMapper oriKaMapper; @Override public LoginVO testOriKaMapper(LoginDTO loginDTO) { return oriKaMapper.map(loginDTO, LoginVO.class); } "},"backend/ENUM.html":{"url":"backend/ENUM.html","title":"æšä¸¾å®šä¹‰","keywords":"","body":"æšä¸¾å®šä¹‰ å…¥å‚ä½¿ç”¨é™åˆ¶ å®šä¹‰åœ¨ç±»é‡Œï¼Œåªæ”¯æŒ@RequestBody å®šä¹‰åœ¨æ§åˆ¶å™¨é‡Œï¼Œåªæ”¯æŒ@RequestParam mybatiså¦‚ä½•ä½¿ç”¨æšä¸¾ï¼Œmybatis ENUM(æšä¸¾ç±»)ï¼Œè¿™æ ·å®šä¹‰çš„å¥½å¤„æ˜¯swaggerä¸springMVCçš„å‡ºå…¥å‚éƒ½æ˜¯value @Getter @AllArgsConstructor public enum CourseEnum { /** * å›¾æ–‡ */ PICTURE(\"102\", \"å›¾æ–‡\"), /** * éŸ³é¢‘ */ AUDIO(\"103\", \"éŸ³é¢‘\"), /** * è§†é¢‘ */ VIDEO(\"104\", \"è§†é¢‘\"), /** * å¤–é“¾ */ URL(\"105\", \"å¤–é“¾\"), ; @JsonValue @EnumValue private final String value; private final String desc; private static final Map MAPPINGS; static { Map temp = new HashMap<>(); for (CourseEnum courseEnum : values()) { temp.put(courseEnum.value, courseEnum); } MAPPINGS = Collections.unmodifiableMap(temp); } @JsonCreator(mode = JsonCreator.Mode.DELEGATING) public static CourseEnum resolve(String index) { return MAPPINGS.get(index); } } å­—æ®µæ’åºæšä¸¾ @Getter @AllArgsConstructor public enum StudentSortEnum{ /** * ä¸»é”® */ ID_DESC(\"id DESC\", \"idå€’åº\"), ID_ASC(\"id ASC\", \"idæ­£åº\"), ; /** * Constant MAPPINGS */ private static final Map MAPPINGS; static { Map temp = new HashMap(); for (StudentSortEnum courseEnum : values()) { temp.put(courseEnum.value, courseEnum); } MAPPINGS = Collections.unmodifiableMap(temp); } @JsonValue private final String value; private final String desc; /** * * æ ¹æ®indexè·å–æšä¸¾ * * * @param index a String. * @return æšä¸¾ * @author miaoyj * @since 2020-10-19 */ @JsonCreator(mode = JsonCreator.Mode.DELEGATING) public static StudentSortEnum resolve(String index) { return MAPPINGS.get(index); } } ä½¿ç”¨ /** * * æµ‹è¯•enum * * * @param courseEnum è¯¾ç¨‹ç±»å‹ * @return ç™»å½•ä¿¡æ¯ * @author miaoyj * @since 2020-07-09 */ @GetMapping(\"enum\") @ApiOperation(value = \"æµ‹è¯•enum\") public LoginVO wd(@ApiParam(value = \"æ’åº\", required = true) @NotNull(message = \"æ’åºå­—æ®µä¸æ­£ç¡®\") @RequestParam StudentSortEnum sort, @ApiParam(value = \"è¯¾ç¨‹\") @RequestParam(required = false) CourseEnum course) { LoginVO loginVO = new LoginVO(); loginVO.setCourseEnum(course); return loginVO; } æ’åºæšä¸¾ï¼Œé…åˆmybatisplusæ’åºä½¿ç”¨ï¼Œmapperæ¥å£å®šä¹‰sortå­—æ®µï¼ŒorderHelperæ’ä»¶ä¼šåœ¨sqlé‡Œè‡ªåŠ¨åŠ å…¥order by public IPage pageVo(Integer pageIndex, Integer pageSize, String name, CourseEnum courseEnum, StudentSortEnum sort) { Page page = new Page(pageIndex, pageSize); page.addOrder(OrderItem.desc(studentOrderColumnEnum.getValue())); return this.baseMapper.pageVo(page, name, sort); } å®ç°æ•ˆæœ "},"backend/DATA-PERMISSION.html":{"url":"backend/DATA-PERMISSION.html","title":"æ•°æ®æƒé™","keywords":"","body":"æ•°æ®æƒé™ è¡Œçº§åˆ« æ”¯æŒæ“ä½œï¼ŒSELECT, UPDATE, DELETE ä½¿ç”¨æ³¨è§£@DataPermissionï¼Œåœ¨xxMapperç±»ä¸Šï¼Œé…ç½®åå°ç®¡ç†ç³»ç»Ÿï¼Œç³»ç»Ÿç®¡ç†/è§’è‰²ç®¡ç†/æ•°æ®èŒƒå›´ åŸç†æ˜¯é€šè¿‡æ‹¦æˆªæ³¨è§£@DataPermissionçš„mapperï¼Œæ ¹æ®å½“å‰ç”¨æˆ·çš„æ•°æ®èŒƒå›´é…ç½®ï¼ŒåŠ å…¥WHERE dept_idã€created_byå­—æ®µæ¡ä»¶å®ç° @DataPermission.deptIdInFieldNameé»˜è®¤ä½¿ç”¨dept_idå­—æ®µ @DataPermission.userIdEQFieldNameé»˜è®¤ä½¿ç”¨created_byå­—æ®µ@DataPermission public interface StudentMapper extends MyBaseMapper {} ä½¿ç”¨datascopeæ³¨æ„äº‹é¡¹ å¤šä¸ªè§’è‰²é‡åˆæƒ…å†µä¸‹ï¼Œçœ‹åˆ°è‡ªå·±å’Œä¸‹çº§ï¼Œå¯ç”¨åŒ1éƒ¨é—¨è§£å†³ï¼Œä¸ä¼šå‡ºç°è‡ªå·±ä¸æ‰€ç®¡äººä¸åœ¨åŒä¸€éƒ¨é—¨åœºæ™¯ æ‰€åœ¨æœºæ„åŠä»¥ä¸‹ï¼ŒåªæŸ¥çˆ¶å­çº§åˆ« åˆ—çº§åˆ« é…ç½®åå°ç®¡ç†ç³»ç»Ÿï¼Œç³»ç»Ÿç®¡ç†/æ•°æ®æƒé™ç®¡ç† ç³»ç»Ÿç®¡ç†/è§’è‰²ç®¡ç†ï¼Œèœå•åˆ†é…ä¸‹å¯å‹¾é€‰è¡¨ç¤ºç¦ç”¨å­—æ®µ æ³¨è§£@DataPermissionFieldMethodï¼Œ\"student:list\"å¯¹åº”æ§åˆ¶å™¨çš„æƒé™æ ‡è¯† è¿”å›ç±»å‹åªæ”¯æŒMyPageã€Collection åˆ†é¡µ @DataPermissionFieldMethod(\"student:list\") public MyPage pageQuery(PageParam page, StudentSortEnum sort, StudentQueryCriteriaDTO query) { QueryWrapper queryWrapper = MybatisUtil.assemblyQueryWrapper(query); return this.baseMapper.pageQuery(page, null, sort, queryWrapper); } è¾“å‡ºç»“æœ { \"code\": 2001, \"message\": \"OK\", \"data\": { \"records\": [ { \"id\": 3, \"name\": \"\", \"age\": 3, \"gmtCreate\": \"2021-09-14 09:22:44\", \"createdBy\": \"System\", \"course\": 105 } ], \"total\": 3, \"pages\": 1, \"meta\": [ { \"sort\": 999, \"name\": \"å§“å\", \"code\": \"name\", \"isAccessible\": false }, { \"sort\": 999, \"name\": \"å¹´é¾„\", \"code\": \"age\", \"isAccessible\": true } ] } } å¯¼å‡º ``` JAVA @Log(\"å¯¼å‡ºç”¨æˆ·\") @ApiOperation(value = \"å¯¼å‡ºç”¨æˆ·\", tags = ApiVersion.VERSION_1_0_8) @GetMapping(value = \"/download\", produces = MediaType.APPLICATION_OCTET_STREAM_VALUE) @PreAuthorize(\"@el.check('student:list')\") public void download(@ApiParam(value = \"æ’åº\", required = true) @NotNull(message = \"æ’åºå­—æ®µä¸æ­£ç¡®\") @RequestParam StudentSortEnum sort, StudentQueryCriteriaDTO criteria) { DataPermissionFieldResult dataPermissionFieldResult = studentService.listQueryAll(sort, criteria); //downloadExcelæ–¹æ³•è‡ªè¡Œåˆ¤æ–­å“ªäº›å­—æ®µæ˜¯å¦å¯¼å‡º DataPermissionFieldResult.downloadExcel(dataPermissionFieldResult); } @DataPermissionFieldMethod(\"student:list\") public DataPermissionFieldResult listQueryAll(StudentSortEnum sort, StudentQueryCriteriaDTO query) { QueryWrapper queryWrapper = MybatisUtil.assemblyQueryWrapper(query); List list = this.baseMapper.queryAll(sort, queryWrapper); return DataPermissionFieldResult.build(studentMapStruct.toVO(list)); } ``` æˆªå›¾ æ ‡è¯†åˆ—å¯¹åº”VOå®šä¹‰çš„å­—æ®µåï¼Œprivate String name; "},"backend/FILTER.html":{"url":"backend/FILTER.html","title":"æ¥å£/å­—æ®µåŠ å¯†","keywords":"","body":"æ¥å£/å­—æ®µåŠ å¯† å­—æ®µåŠ /è§£å¯† AESå…¥å‚è§£å¯†ã€å‡ºå‚åŠ å¯† æ³¨æ„äº‹é¡¹ å‚ä¸åŠ è§£å¯†çš„å­—æ®µç±»å‹å¿…é¡»æ˜¯String æ”¯æŒçš„ç±»å‹æœ‰ï¼šStringã€Listã€POJOã€List MyPageä»…æ”¯æŒå‡ºå‚ç±»å‹ ä¸ä¼šå¤„ç†åµŒå¥—list æ³¨è§£ @EncryptMethodï¼Œå‚ä¸åŠ /è§£å¯†çš„æ–¹æ³•ä¸Šå¿…é¡»å¢åŠ ï¼Œå‚æ•°returnValé»˜è®¤falseä¸åŠ å¯†å‡ºå‚ï¼Œä¸ºtrueæ—¶åŠ å¯†å‡ºå‚ @EncryptField æ–¹æ³•çš„å‚æ•°ï¼Œå¯¹è±¡çš„å­—æ®µä¸Šå¢åŠ  å…¥å‚ç¤ºä¾‹ /** * * æ ¹æ®IDæŸ¥è¯¢ * * * @param id ID * @return StudentVO å¯¹è±¡ */ @EncryptMethod public StudentVO getVoById(@EncryptField String id, @EncryptField List ids, @EncryptField StudentDTO dto, @EncryptField List dtos) { StudentDO studentDO = this.getById(id); Assert.notNull(studentDO, \"è®°å½•ä¸å­˜åœ¨æˆ–æƒé™ä¸è¶³\"); return this.studentMapStruct.toVO(studentDO); } @Data public class StudentVO implements Serializable { @ApiModelProperty(value = \"å§“å\") @EncryptField private String name; } å‡ºå‚ç¤ºä¾‹ @EncryptMethod(returnVal = true) public MyPage pageQuery(PageParam page, StudentSortEnum sort, StudentQueryCriteriaDTO query) { QueryWrapper queryWrapper = MybatisUtil.assemblyQueryWrapper(query); return this.baseMapper.pageQuery(page, sort, queryWrapper); } éæ³¨è§£å¤„ç† å¯ä½¿ç”¨EncryptFieldUtilç±»å•ç‹¬ä½¿ç”¨ AESåŠ å¯†é…ç½®å±æ€§boot.admin.filter.encryption.field.secret-key æ¥å£åŠ å¯† md5ä¸rsaå‡ä½¿ç”¨çš„æ˜¯éªŒç­¾çš„æ–¹å¼è¿›è¡ŒéªŒè¯ï¼Œä¸æ¶‰åŠæ•°æ®åŠ å¯† TODO é˜²æ­¢é‡å¤æäº¤ï¼ˆæ‰¹é‡ï¼Œæ³¨è§£ï¼‰ åŠ å¯†ç±»å‹ MD5 è¯·æ±‚å¤´ï¼Œå¿…ä¼  å‚æ•° è¯´æ˜ appId åº”ç”¨æ ‡è¯† timestamp æ—¶é—´æˆ³(æ¯«ç§’) nonce éšæœºæ•°(10ä½) sign ç­¾å signè¯´æ˜ æœåŠ¡ç«¯ä¼šç»™å‡ºä¸€ä¸ªappIdå’Œä¸€ä¸ªappKey, appKeyç”¨äºå‚æ•°ç­¾åä½¿ç”¨ï¼Œæ³¨æ„appKeyä¿å­˜åˆ°å®¢æˆ·ç«¯ï¼Œéœ€è¦åšä¸€äº›å®‰å…¨å¤„ç†ï¼Œé˜²æ­¢æ³„éœ² signçš„å€¼ä¸€èˆ¬æ˜¯å°†URLæ‰€æœ‰éç©ºå‚æ•°æŒ‰ç…§å­—æ¯å‡åºæ’åº+appKey+timestamp+nonceæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œç„¶åä½¿ç”¨md5ç”Ÿæˆ16è¿›åˆ¶å°å†™å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯† å…¬å¼ï¼šmd5ç”Ÿæˆ16è¿›åˆ¶å°å†™å­—ç¬¦ä¸²(ASCIIå‡åºæ’åºURLæ‰€æœ‰å‚æ•°(ç©ºå‚æ•°ä¸å‚ä¸)+appKey+timestamp+nonce) RSA ä½¿ç”¨å„è‡ªè¯­è¨€å¯¹åº”çš„SHA256WithRSAç­¾åå‡½æ•°åˆ©ç”¨å•†æˆ·ç§é’¥å¯¹å¾…ç­¾åå­—ç¬¦ä¸²è¿›è¡Œç­¾åï¼Œå¹¶è¿›è¡ŒBase64ç¼–ç  å…¬å¼ï¼šBase64.encode(RSAç§é’¥ç­¾å(ASCIIæ’åºURLå‚æ•°(ç©ºå‚æ•°ä¸å‚ä¸)+timestamp+nonce)) ``` JAVA String str = \"æˆ‘æ˜¯ä¸€æ®µæµ‹è¯•aaaa\"; KeyPair keyPair = SecureUtil.generateKeyPair(AsymmetricAlgorithm.RSA.getValue(), 2048); byte[] publicKey = keyPair.getPublic().getEncoded(); byte[] privateKey = keyPair.getPrivate().getEncoded(); StaticLog.info(\"publicKey:{}\", Base64.encode((publicKey))); StaticLog.info(\"privateKey:{}\", Base64.encode(privateKey)); RSA rsa = SecureUtil.rsa(privateKey, publicKey); //å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯† byte[] encrypt = rsa.encrypt(StrUtil.bytes(str, CharsetUtil.CHARSET_UTF_8), KeyType.PublicKey); byte[] decrypt = rsa.decrypt(encrypt, KeyType.PrivateKey); // StaticLog.info(\"encrypt:{}\", Base64.encode(encrypt)); // StaticLog.info(\"decrypt:{}\", StrUtil.str(decrypt, CharsetUtil.CHARSET_UTF_8)); //ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯† // byte[] encrypt2 = rsa.encrypt(StrUtil.bytes(str, CharsetUtil.CHARSET_UTF_8), KeyType.PrivateKey); // byte[] decrypt2 = rsa.decrypt(encrypt2, KeyType.PublicKey); // StaticLog.info(\"encrypt2:{}\", Base64.encode(encrypt2)); // StaticLog.info(\"decrypt2:{}\", StrUtil.str(decrypt2, CharsetUtil.CHARSET_UTF_8)); // Signature signature = SecureUtil.generateSignature(AsymmetricAlgorithm.RSA, DigestAlgorithm.SHA256); byte[] data = str.getBytes(); Sign sign = SecureUtil.sign(SignAlgorithm.SHA256withRSA); sign.setPrivateKey(keyPair.getPrivate()); //ç­¾å byte[] signed = sign.sign(data); //éªŒè¯ç­¾å sign = SecureUtil.sign(SignAlgorithm.SHA256withRSA); sign.setPublicKey(keyPair.getPublic()); boolean verify = sign.verify(data, signed); StaticLog.info(\"verify:{}\", verify); ``` é…ç½® å‰ç¼€ boot.admin.filter.encryption. å‚æ•° è¯´æ˜ é»˜è®¤å€¼ ä¸¾ä¾‹ filter-urls è¦è¿‡æ»¤çš„åœ°å€ï¼Œæ•°ç»„ @APIDefineFieldå€¼+/** - /demo/** exclude-urls è¦å¿½ç•¥çš„åœ°å€ï¼Œæ•°ç»„ æ—  - /demo/students/** type åŠ å¯†æ–¹å¼(MD5 RSA) MD5 enabled æ˜¯å¦å¯ç”¨(true false) true timestamp è¶…æ—¶æ—¶æ•ˆï¼Œè¶…è¿‡æ­¤æ—¶é—´è®¤ä¸ºç­¾åè¿‡æœŸæ¯«ç§’ 5 60 1000L 5 60 1000L nonce-length éšæœºæ•°é•¿åº¦ 10 5L applications å®¢æˆ·ç«¯ä¿¡æ¯(appId:appKey) æ—  - id: 2 key: 22 privateKey: publicKey "},"backend/HUTOOL.html":{"url":"backend/HUTOOL.html","title":"å·¥å…·ç±»åº“","keywords":"","body":"å·¥å…·ç±»åº“ https://hutool.cn/docs/#/ "},"backend/LOG.html":{"url":"backend/LOG.html","title":"æ—¥å¿—","keywords":"","body":"æ—¥å¿— é»˜è®¤è¾“å‡ºè·¯å¾„ï¼š ./logs è¾“å‡º StaticLogæä¾›äº†traceã€debugã€infoã€warnã€erroræ–¹æ³•ï¼Œæä¾›å˜é‡å ä½ç¬¦æ”¯æŒ StaticLog.info(\"This is static {} log.\", \"test\"); æ³¨è§£-é€šç”¨æ“ä½œæ—¥å¿—ç»„ä»¶ @LogRecordAnnotation ä¼˜åŒ–è‡ª https://github.com/mouzt/mzt-biz-log/ æ­¤ç»„ä»¶è§£å†³çš„é—®é¢˜æ˜¯ï¼š ã€Œè°ã€åœ¨ã€Œä»€ä¹ˆæ—¶é—´ã€å¯¹ã€Œä»€ä¹ˆã€åšäº†ã€Œä»€ä¹ˆäº‹ã€ Change Log ä¼˜åŒ–å†…å®¹ æ•´ä½“æ—¥å¿—æ‹¦æˆªåœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ æ”¯æŒå¯¹è±¡çš„diff å­—æ®µå¢åŠ åˆ†ç±»ã€ç±»å‹ã€æ¨¡å—ã€å¼‚å¸¸è®°å½• ä½¿ç”¨æ–¹å¼ SpringBootå…¥å£æ‰“å¼€å¼€å…³,æ·»åŠ  @EnableLogRecord æ³¨è§£ tenantæ˜¯ä»£è¡¨ç§Ÿæˆ·çš„æ ‡è¯†ï¼Œä¸€èˆ¬ä¸€ä¸ªæœåŠ¡æˆ–è€…ä¸€ä¸ªä¸šåŠ¡ä¸‹çš„å¤šä¸ªæœåŠ¡éƒ½å†™æ­»ä¸€ä¸ª tenant å°±å¯ä»¥ @SpringBootApplication(exclude = DataSourceAutoConfiguration.class) @EnableLogRecord(tenant = \"com.mzt.test\") public class Main { public static void main(String[] args) { SpringApplication.run(Main.class, args); } } æ—¥å¿—åŸ‹ç‚¹ 1. æ™®é€šçš„è®°å½•æ—¥å¿— categoryï¼šåˆ†ç±» typeï¼šç±»å‹ moduleï¼šæ¨¡å— valueï¼šæ“ä½œå†…å®¹ï¼Œå¦‚ï¼šåˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·, ç”¨æˆ·å§“åï¼šã€Œ{{#dto.name}}ã€ pefixï¼šæ˜¯æ‹¼æ¥åœ¨ bizNo ä¸Šä½œä¸º log çš„ä¸€ä¸ªæ ‡è¯†ã€‚é¿å… bizNo éƒ½ä¸ºæ•´æ•° ID çš„æ—¶å€™å’Œå…¶ä»–çš„ä¸šåŠ¡ä¸­çš„ ID é‡å¤ã€‚æ¯”å¦‚è®¢å• IDã€ç”¨æˆ· ID ç­‰ bizNoï¼šå°±æ˜¯ä¸šåŠ¡çš„ IDï¼Œæ¯”å¦‚è®¢å•IDï¼Œæˆ‘ä»¬æŸ¥è¯¢çš„æ—¶å€™å¯ä»¥æ ¹æ® bizNo æŸ¥è¯¢å’Œå®ƒç›¸å…³çš„æ“ä½œæ—¥å¿— detailï¼šè¯¦ç»†å†…å®¹ï¼Œå¦‚ï¼šä¿®æ”¹å†…å®¹ï¼šã€Œ{STUDENT_UPDATE_DIFF_BY_DTO{#dto}}ã€ operatorIdï¼šå¯æŒ‡å®šï¼Œå¦‚ç™»å½•æ—¶ï¼ŒoperatorId = \"{{#authUser.username}}\" SpEL è¡¨è¾¾å¼ï¼šå…¶ä¸­ç”¨åŒå¤§æ‹¬å·åŒ…å›´èµ·æ¥çš„ï¼ˆä¾‹å¦‚ï¼š{{#order.purchaseName}}ï¼‰#order.purchaseName æ˜¯ SpELè¡¨è¾¾å¼ã€‚Springä¸­æ”¯æŒçš„å®ƒéƒ½æ”¯æŒçš„ã€‚æ¯”å¦‚è°ƒç”¨é™æ€æ–¹æ³•ï¼Œä¸‰ç›®è¡¨è¾¾å¼ã€‚SpEL å¯ä»¥ä½¿ç”¨æ–¹æ³•ä¸­çš„ä»»ä½•å‚æ•°@LogRecordAnnotation(success = \"\\{\\{#order.purchaseName\\}\\}ä¸‹äº†ä¸€ä¸ªè®¢å•,è´­ä¹°å•†å“ã€Œ\\{\\{#order.productName\\}\\}ã€,ä¸‹å•ç»“æœ:\\{\\{#_ret\\}\\}\", prefix = LogRecordType.ORDER, bizNo = \"\\{\\{#order.orderNo\\}\\}\") public boolean createOrder(Order order) { log.info(\"ã€åˆ›å»ºè®¢å•ã€‘orderNo={}\", order.getOrderNo()); // db insert order return true; } 2. æ—¥å¿—æ–‡æ¡ˆè°ƒæ•´ å‚è€ƒStudentNameByIdsParseFunctionï¼ŒStudentUpdateDiffByDtoParseFunction å¯¹äºæ›´æ–°ç­‰æ–¹æ³•ï¼Œæ–¹æ³•çš„å‚æ•°ä¸Šå¤§éƒ¨åˆ†éƒ½æ˜¯è®¢å•IDã€æˆ–è€…äº§å“IDç­‰ï¼Œ æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼šæ—¥å¿—è®°å½•çš„successå†…å®¹æ˜¯ï¼š\"æ›´æ–°äº†è®¢å•{{#orderId}},æ›´æ–°å†…å®¹ä¸º....\"ï¼Œè¿™ç§å¯¹äºè¿è¥æˆ–è€…äº§å“æ¥è¯´éš¾ä»¥ç†è§£ï¼Œæ‰€ä»¥å¼•å…¥äº†è‡ªå®šä¹‰å‡½æ•°çš„åŠŸèƒ½ã€‚ ä½¿ç”¨æ–¹æ³•æ˜¯åœ¨åŸæ¥çš„å˜é‡çš„ä¸¤ä¸ªå¤§æ‹¬å·ä¹‹é—´åŠ ä¸€ä¸ªå‡½æ•°åç§° ä¾‹å¦‚ \"{ORDER{#orderId}}\" å…¶ä¸­ ORDER æ˜¯ä¸€ä¸ªå‡½æ•°åç§°ã€‚åªæœ‰ä¸€ä¸ªå‡½æ•°åç§°æ˜¯ä¸å¤Ÿçš„,éœ€è¦æ·»åŠ è¿™ä¸ªå‡½æ•°çš„å®šä¹‰å’Œå®ç°ã€‚å¯ä»¥çœ‹ä¸‹é¢ä¾‹å­ è‡ªå®šä¹‰çš„å‡½æ•°éœ€è¦å®ç°æ¡†æ¶é‡Œé¢çš„IParseFunctionçš„æ¥å£ï¼Œéœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼š functionName() æ–¹æ³•å°±è¿”å›æ³¨è§£ä¸Šé¢çš„å‡½æ•°åï¼› apply()å‡½æ•°å‚æ•°æ˜¯ \"{ORDER{#orderId}}\"ä¸­SpELè§£æçš„#orderIdçš„å€¼ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªæ•°å­—1223110ï¼Œæ¥ä¸‹æ¥åªéœ€è¦åœ¨å®ç°çš„ç±»ä¸­æŠŠ ID è½¬æ¢ä¸ºå¯è¯»æ‡‚çš„å­—ç¬¦ä¸²å°±å¯ä»¥äº†ï¼Œ ä¸€èˆ¬ä¸ºäº†æ–¹ä¾¿æ’æŸ¥é—®é¢˜éœ€è¦æŠŠåç§°å’ŒIDéƒ½å±•ç¤ºå‡ºæ¥ï¼Œä¾‹å¦‚ï¼š\"è®¢å•åç§°ï¼ˆIDï¼‰\"çš„å½¢å¼ã€‚ è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼šåŠ äº†è‡ªå®šä¹‰å‡½æ•°åï¼Œæ¡†æ¶æ€ä¹ˆèƒ½è°ƒç”¨åˆ°å‘¢ï¼Ÿ ç­”ï¼šå¯¹äºSpring bootåº”ç”¨å¾ˆç®€å•ï¼Œåªéœ€è¦æŠŠå®ƒæš´éœ²åœ¨Springçš„ä¸Šä¸‹æ–‡ä¸­å°±å¯ä»¥äº†ï¼Œå¯ä»¥åŠ ä¸ŠSpringçš„ @Component æˆ–è€… @Service å¾ˆæ–¹ä¾¿ğŸ˜„ã€‚Spring mvc åº”ç”¨éœ€è¦è‡ªå·±è£…é… Beanã€‚ // æ²¡æœ‰ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•° @LogRecordAnnotation(success = \"æ›´æ–°äº†è®¢å•\\{\\{#orderId\\}\\},æ›´æ–°å†…å®¹ä¸º....\", prefix = LogRecordType.ORDER, bizNo = \"\\{\\{#order.orderNo\\}\\}\", detail = \"\\{\\{#order.toString()\\}\\}\") public boolean update(Long orderId, Order order) { return false; } //ä½¿ç”¨äº†è‡ªå®šä¹‰å‡½æ•°ï¼Œä¸»è¦æ˜¯åœ¨ \\{\\{#orderId\\}\\} çš„å¤§æ‹¬å·ä¸­é—´åŠ äº† functionName @LogRecordAnnotation(success = \"æ›´æ–°äº†è®¢å•{ORDER{#orderId\\}\\},æ›´æ–°å†…å®¹ä¸º...\", prefix = LogRecordType.ORDER, bizNo = \"\\{\\{#order.orderNo\\}\\}\", detail = \"\\{\\{#order.toString()\\}\\}\") public boolean update(Long orderId, Order order) { return false; } // è¿˜éœ€è¦åŠ ä¸Šå‡½æ•°çš„å®ç° @Component public class OrderParseFunction implements IParseFunction { @Resource @Lazy //ä¸ºäº†é¿å…ç±»åŠ è½½é¡ºåºçš„é—®é¢˜ æœ€å¥½ä¸ºLazyï¼Œæ²¡æœ‰é—®é¢˜ä¹Ÿå¯ä»¥ä¸åŠ  private OrderQueryService orderQueryService; @Override public String functionName() { // å‡½æ•°åç§°ä¸º ORDER return \"ORDER\"; } @Override //è¿™é‡Œçš„ value å¯ä»¥å§ Order çš„JSONå¯¹è±¡çš„ä¼ é€’è¿‡æ¥ï¼Œç„¶ååè§£ææ‹¼æ¥ä¸€ä¸ªå®šåˆ¶çš„æ“ä½œæ—¥å¿—å†…å®¹ public String apply(String value) { if(StringUtils.isEmpty(value)){ return value; } Order order = orderQueryService.queryOrder(Long.parseLong(value)); //æŠŠè®¢å•äº§å“åç§°åŠ ä¸Šä¾¿äºç†è§£ï¼ŒåŠ ä¸Š ID ä¾¿äºæŸ¥é—®é¢˜ return order.getProductName().concat(\"(\").concat(value).concat(\")\"); } } 3.æ—¥å¿—æ–‡æ¡ˆè°ƒæ•´ ä½¿ç”¨ SpEL ä¸‰ç›®è¡¨è¾¾å¼ @LogRecordAnnotation(prefix = LogRecordTypeConstant.CUSTOM_ATTRIBUTE, bizNo = \"\\{\\{#businessLineId\\}\\}\", success = \"\\{\\{#disable ? 'åœç”¨' : 'å¯ç”¨'\\}\\}äº†è‡ªå®šä¹‰å±æ€§{ATTRIBUTE{#attributeId\\}\\}\") public CustomAttributeVO disableAttribute(Long businessLineId, Long attributeId, boolean disable) { return xxx; } 4. æ—¥å¿—æ–‡æ¡ˆè°ƒæ•´ æ¨¡ç‰ˆä¸­ä½¿ç”¨æ–¹æ³•å‚æ•°ä¹‹å¤–çš„å˜é‡&å‡½æ•°ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨Contextä¸­å˜é‡ å¯ä»¥åœ¨æ–¹æ³•ä¸­é€šè¿‡ LogRecordContext.putVariable(variableName, Object) çš„æ–¹æ³•æ·»åŠ å˜é‡ï¼Œç¬¬ä¸€ä¸ªå¯¹è±¡ä¸ºå˜é‡åç§°ï¼Œåé¢ä¸ºå˜é‡çš„å¯¹è±¡ï¼Œ ç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ SpEL ä½¿ç”¨è¿™ä¸ªå˜é‡äº†ï¼Œä¾‹å¦‚ï¼šä¾‹å­ä¸­çš„ {{#innerOrder.productName}} æ˜¯åœ¨æ–¹æ³•ä¸­è®¾ç½®çš„å˜é‡ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ä¸Šé¢æåˆ°çš„è‡ªå®šä¹‰å‡½æ•°ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨LogRecordContextä¸­çš„å˜é‡ã€‚ ï¼ˆæ³¨æ„ï¼šLogRecordContextä¸­å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸ºè¿™ä¸ªæ–¹æ³•ï¼Œè¶…å‡ºè¿™ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ä¸­setåˆ°Contextçš„å˜é‡å°±è·å–ä¸åˆ°äº†ï¼‰ @Override @LogRecordAnnotation( success = \"\\{\\{#order.purchaseName\\}\\}ä¸‹äº†ä¸€ä¸ªè®¢å•,è´­ä¹°å•†å“ã€Œ\\{\\{#order.productName\\}\\}ã€,æµ‹è¯•å˜é‡ã€Œ\\{\\{#innerOrder.productName\\}\\}ã€,ä¸‹å•ç»“æœ:\\{\\{#_ret\\}\\}\", prefix = LogRecordType.ORDER, bizNo = \"\\{\\{#order.orderNo\\}\\}\") public boolean createOrder(Order order) { log.info(\"ã€åˆ›å»ºè®¢å•ã€‘orderNo={}\", order.getOrderNo()); // db insert order Order order1 = new Order(); order1.setProductName(\"å†…éƒ¨å˜é‡æµ‹è¯•\"); LogRecordContext.putVariable(\"innerOrder\", order1); return true; } 5. å‡½æ•°ä¸­ä½¿ç”¨LogRecordContextçš„å˜é‡ ä½¿ç”¨ LogRecordContext.putVariable(variableName, Object) æ·»åŠ çš„å˜é‡é™¤äº†å¯ä»¥åœ¨æ³¨è§£çš„ SpEL è¡¨è¾¾å¼ä¸Šä½¿ç”¨ï¼Œè¿˜å¯ä»¥åœ¨è‡ªå®šä¹‰å‡½æ•°ä¸­ä½¿ç”¨ è¿™ç§æ–¹å¼æ¯”è¾ƒå¤æ‚ï¼Œä¸‹é¢ä¾‹å­ä¸­ç¤ºæ„äº†åˆ—è¡¨çš„å˜åŒ–ï¼Œæ¯”å¦‚ ä»[A,B,C] æ”¹åˆ° [B,D] é‚£ä¹ˆæ—¥å¿—æ˜¾ç¤ºï¼šã€Œåˆ é™¤äº†Aï¼Œå¢åŠ äº†Dã€ @LogRecord(success = \"{DIFF_LIST{'æ–‡æ¡£åœ°å€'\\}\\}\", bizNo = \"\\{\\{#id\\}\\}\", prefix = REQUIREMENT) public void updateRequirementDocLink(String currentMisId, Long id, List docLinks) { RequirementDO requirementDO = getRequirementDOById(id); LogRecordContext.putVariable(\"oldList\", requirementDO.getDocLinks()); LogRecordContext.putVariable(\"newList\", docLinks); requirementModule.updateById(\"docLinks\", RequirementUpdateDO.builder() .id(id) .docLinks(docLinks) .updater(currentMisId) .updateTime(new Date()) .build()); } @Component public class DiffListParseFunction implements IParseFunction { @Override public String functionName() { return \"DIFF_LIST\"; } @SuppressWarnings(\"unchecked\") @Override public String apply(String value) { if (StringUtils.isBlank(value)) { return value; } List oldList = (List) LogRecordContext.getVariable(\"oldList\"); List newList = (List) LogRecordContext.getVariable(\"newList\"); oldList = oldList == null ? Lists.newArrayList() : oldList; newList = newList == null ? Lists.newArrayList() : newList; Set deletedSets = Sets.difference(Sets.newHashSet(oldList), Sets.newHashSet(newList)); Set addSets = Sets.difference(Sets.newHashSet(newList), Sets.newHashSet(oldList)); StringBuilder stringBuilder = new StringBuilder(); if (CollectionUtils.isNotEmpty(addSets)) { stringBuilder.append(\"æ–°å¢äº† \").append(value).append(\"ï¼š\"); for (String item : addSets) { stringBuilder.append(item).append(\"ï¼Œ\"); } } if (CollectionUtils.isNotEmpty(deletedSets)) { stringBuilder.append(\"åˆ é™¤äº† \").append(value).append(\"ï¼š\"); for (String item : deletedSets) { stringBuilder.append(item).append(\"ï¼Œ\"); } } return StringUtils.isBlank(stringBuilder) ? null : stringBuilder.substring(0, stringBuilder.length() - 1); } } "},"backend/JASYPT.html":{"url":"backend/JASYPT.html","title":"é…ç½®æ–‡ä»¶åŠ å¯†","keywords":"","body":"é…ç½®æ–‡ä»¶æ•æ„Ÿä¿¡æ¯åŠ å¯† application.yml pwd: ENC(åŠ å¯†åçš„å­—æ®µ) å¯åŠ¨jar java -jar demo.jar --jasypt.encryptor.password=${password} ä½¿ç”¨jasyptåŠ è§£å¯† public static void main(String[] args) { BasicTextEncryptor textEncryptor = new BasicTextEncryptor(); //åŠ å¯†æ‰€éœ€çš„salt(ç›) textEncryptor.setPassword(\"G0CvDz7oJn6\"); //è¦åŠ å¯†çš„æ•°æ®ï¼ˆæ•°æ®åº“çš„ç”¨æˆ·åæˆ–å¯†ç ï¼‰ String username = textEncryptor.encrypt(\"root\"); String password = textEncryptor.encrypt(\"root123\"); System.out.println(\"username:\"+username); System.out.println(\"password:\"+password); } password(ç›)ï¼Œinput(åŠ å¯†å†…å®¹) åŠ å¯† $ java -cp ~/.m2/repository/org/jasypt/jasypt/1.9.3/jasypt-1.9.3.jar org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI password=e9fbdb2d3b21 algorithm=PBEWithMD5AndDES input= è§£å¯† $ java -cp ~/.m2/repository/org/jasypt/jasypt/1.9.3/jasypt-1.9.3.jar org.jasypt.intf.cli.JasyptPBEStringDecryptionCLI password=e9fbdb2d3b21 algorithm=PBEWithMD5AndDES input= "},"backend/LIMIT.html":{"url":"backend/LIMIT.html","title":"é™æµ","keywords":"","body":"é™æµ @Limitæ³¨è§£ "},"backend/LIQUIBASE.html":{"url":"backend/LIQUIBASE.html","title":"æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶","keywords":"","body":"liquibase ç®€ä»‹ Liquibaseæ˜¯ä¸€ä¸ªç”¨äºè·Ÿè¸ªã€ç®¡ç†å’Œåº”ç”¨æ•°æ®åº“å˜åŒ–çš„å¼€æºæ•°æ®åº“é‡æ„å·¥å…·ã€‚å®ƒå°†æ‰€æœ‰æ•°æ®åº“çš„å˜åŒ–ä¿å­˜åœ¨XMLæ–‡ä»¶ä¸­ï¼Œä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œé¡¹ç›®éƒ¨ç½²å‡çº§ã€‚ä½¿ç”¨è¯¥å·¥å…·å¯ä»¥ç¨³å®šã€é«˜æ•ˆç‡åœ°å®ç°ä»£ç è¿ç§»ä¸å›æ»šã€‚ æ•°æ®åº“ ç‰ˆæœ¬ï¼š mysql5.7.8+ é»˜è®¤å­—ç¬¦é›†: utf8mb4 é»˜è®¤æ’åºè§„åˆ™: utf8mb4_general_ci åˆ›å»ºæ•°æ®åº“SQL CREATE DATABASE IF NOT EXISTS `boot-admin` CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci; å»ºè¡¨è§„çº¦ --é˜¿é‡Œä»£ç è§„èŒƒ 1.ã€å¼ºåˆ¶ã€‘è¡¨å¿…å¤‡ä¸‰å­—æ®µ: id,gmt_create,gmt_modified 2.ã€å¼ºåˆ¶ã€‘é€»è¾‘åˆ é™¤å­—æ®µ: is_deleted, created_by, updated_by 3.ã€å¼ºåˆ¶ã€‘è¡¨å­—æ®µæ³¨é‡Š 4.ã€å¼ºåˆ¶ã€‘è¡¨è¾¾æ˜¯ä¸å¦æ¦‚å¿µçš„å­—æ®µ å¿…é¡»ä½¿ç”¨is_xxx çš„æ–¹å¼å‘½åï¼Œæ•°æ®ç±»å‹æ˜¯ unsigned tinyint(1 è¡¨ç¤ºæ˜¯ï¼Œ0 è¡¨ç¤ºå¦)ã€‚ è¯´æ˜:ä»»ä½•å­—æ®µå¦‚æœä¸ºéè´Ÿæ•°ï¼Œå¿…é¡»æ˜¯unsignedã€‚ æ³¨æ„:POJOç±»ä¸­çš„ä»»ä½•å¸ƒå°”ç±»å‹çš„å˜é‡ï¼Œéƒ½ä¸è¦åŠ iså‰ç¼€ï¼Œéœ€è¦åœ¨resultMapè®¾ç½®ä»is_xxxåˆ°Xxxçš„æ˜ å°„å…³ç³»ã€‚ æ•°æ®åº“è¡¨ç¤ºæ˜¯ä¸å¦çš„å€¼ï¼Œä½¿ç”¨tinyintç±»å‹ï¼ŒåšæŒis_xxxçš„å‘½åæ–¹å¼æ˜¯ä¸ºäº†æ˜ç¡®å…¶å–å€¼å«ä¹‰ä¸å–å€¼èŒƒå›´ã€‚ æ­£ä¾‹:è¡¨è¾¾é€»è¾‘åˆ é™¤çš„å­—æ®µåis_deletedï¼Œ1 è¡¨ç¤ºåˆ é™¤ï¼Œ0 è¡¨ç¤ºæœªåˆ é™¤ã€‚ 5.ã€å¼ºåˆ¶ã€‘ç´¢å¼•å‘½åã€‚ ä¸»é”®ç´¢å¼•åä¸ºpkå­—æ®µå;å”¯ä¸€ç´¢å¼•åä¸ºukå­—æ®µå;æ™®é€šç´¢å¼•ååˆ™ä¸ºidx_å­—æ®µåã€‚ è¯´æ˜:pk å³ primary key;uk å³ unique key;idx_ å³ index çš„ç®€ç§°ã€‚ 6.ã€å¼ºåˆ¶ã€‘å°æ•°ç±»å‹ä¸ºdecimalï¼Œç¦æ­¢ä½¿ç”¨floatå’Œdoubleã€‚ è¯´æ˜:åœ¨å­˜å‚¨çš„æ—¶å€™ï¼Œfloat å’Œ double éƒ½å­˜åœ¨ç²¾åº¦æŸå¤±çš„é—®é¢˜ï¼Œå¾ˆå¯èƒ½åœ¨æ¯”è¾ƒå€¼çš„æ—¶å€™ï¼Œå¾—åˆ°ä¸æ­£ç¡®çš„ ç»“æœã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®èŒƒå›´è¶…è¿‡ decimal çš„èŒƒå›´ï¼Œå»ºè®®å°†æ•°æ®æ‹†æˆæ•´æ•°å’Œå°æ•°å¹¶åˆ†å¼€å­˜å‚¨ã€‚ è¿ç®—ï¼šhttps://hutool.cn/docs/#/core/%E5%B7%A5%E5%85%B7%E7%B1%BB/%E6%95%B0%E5%AD%97%E5%B7%A5%E5%85%B7-NumberUtil 7.ã€å¼ºåˆ¶ã€‘varchar æ˜¯å¯å˜é•¿å­—ç¬¦ä¸²ä¸é¢„å…ˆåˆ†é…å­˜å‚¨ç©ºé—´ï¼Œé•¿åº¦ä¸è¦è¶…è¿‡5000ï¼Œå¦‚æœå­˜å‚¨é•¿åº¦ å¤§äºæ­¤å€¼ï¼Œå®šä¹‰å­—æ®µç±»å‹ä¸º textï¼Œç‹¬ç«‹å‡ºæ¥ä¸€å¼ è¡¨ï¼Œç”¨ä¸»é”®æ¥å¯¹åº”ï¼Œé¿å…å½±å“å…¶å®ƒå­—æ®µç´¢å¼•æ•ˆç‡ã€‚ 8.ã€æ¨èã€‘è¡¨çš„å‘½åæœ€å¥½æ˜¯éµå¾ªâ€œä¸šåŠ¡åç§°_è¡¨çš„ä½œç”¨â€ã€‚ æ­£ä¾‹:alipay_task / force_project / trade_config è¡¨æ“ä½œ å®é™…æ“ä½œå¯å‚è€ƒresources/liquibase/1.0.0å†…çš„å®šä¹‰ å¤šäººå¼€å‘æ—¶ä¸æ¨èä½¿ç”¨å…±äº«æ•°æ®åº“ï¼Œsqlç‰ˆæœ¬ä¸å¥½æ§åˆ¶ï¼Œæ¨èåœ¨å¼€å‘äººå‘˜æœ¬æœºå®‰è£…æ•°æ®åº“ æ¨èä½¿ç”¨çº¯sqlåšè¡¨æ“ä½œï¼Œä»¥åè¿ç§»æ¯”è¾ƒæ–¹ä¾¿ ä¸€å®šè¦å†™å›æ»šçš„è¯­å¥ï¼Œé»˜è®¤é…ç½®å¼€å¯äº†test-rollback-on-updateå±æ€§ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†ä¿è¯sqlæ›´æ–°å¯æ§ï¼Œå¯å›æ»š devã€qaã€demoã€prodç¯å¢ƒï¼Œupdateæ“ä½œé»˜è®¤é€šè¿‡spring-liquibaseæ–¹å¼æ‰§è¡Œï¼Œæƒ³æ‰‹åŠ¨æ§åˆ¶sqlï¼Œå¯ä¿®æ”¹spring.liquibase.enabledå±æ€§ç¦ç”¨ XMLæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼šresources/liquibase/changelog/[maven.project.version] æ·»åŠ é¡ºåº resources/liquibase/changelogä¸‹æ·»åŠ ç‰ˆæœ¬ç›®å½•ï¼Œå¦‚1.0.0 åœ¨ç‰ˆæœ¬ç›®å½•ä¸‹å¢åŠ xmlç›®å½•ä¸master.xml åœ¨xmlç›®å½•å¢åŠ todoxxxx.xmlå’Œsqlç›®å½• master.xmlå¼•å…¥æ–°æ·»åŠ çš„todoxxxx.xml ç¤ºä¾‹ resources liquibase changelog 1.0.0 xml sql 20200702_001_add_tb_student.xml -- æ·»åŠ å­¦ç”Ÿè¡¨ master.xml --å¼•å…¥20200702_001_add_tb_student.xmlï¼Œå¹¶æ·»åŠ tag 1.1.0 xml sql 20200703_001_init_data_student.xml -- åˆå§‹åŒ–å­¦ç”Ÿè¡¨æ•°æ® master.xml --å¼•å…¥20200703_001_init_data_student.xmlï¼Œå¹¶æ·»åŠ tag æ–°å¢è¡¨ XMLå‘½åè§„èŒƒï¼š[æ—¥æœŸ][åºå·]_add_tb[è¡¨å].xml ç¤ºä¾‹ï¼š20200702_001_add_tb_student.xml åˆå§‹åŒ–æ•°æ® XMLå‘½åè§„èŒƒï¼š[æ—¥æœŸ][åºå·]_init_data[è¡¨å].xml ç¤ºä¾‹ï¼š20200703_001_init_data_student.xml å¢åŠ å­—æ®µ XMLå‘½åè§„èŒƒï¼š[æ—¥æœŸ][åºå·]_add_col[è¡¨å].xml ç¤ºä¾‹ï¼š20200703_002_add_col_student.xml åˆ é™¤å­—æ®µ XMLå‘½åè§„èŒƒï¼š[æ—¥æœŸ][åºå·]_del_col[è¡¨å].xml ç¤ºä¾‹ï¼š20200703_003_del_col_student.xml ä¿®æ”¹å­—æ®µ XMLå‘½åè§„èŒƒï¼š[æ—¥æœŸ][åºå·]_modify_col[è¡¨å].xml ç¤ºä¾‹ï¼š20200703_004_modify_col_student.xml æ·»åŠ ç´¢å¼• uk:å”¯ä¸€ç´¢å¼•, idx:æ™®é€šç´¢å¼• XMLå‘½åè§„èŒƒï¼š[æ—¥æœŸ][åºå·]_add[uk/idx]_[è¡¨å].xml ç¤ºä¾‹ï¼š20200703_005_add_idx_student.xml åˆå§‹åŒ–æ•°æ®CSVï¼Œä¸æ¨è XMLå‘½åè§„èŒƒï¼š[æ—¥æœŸ][åºå·]_init_data[è¡¨å].xml ç¤ºä¾‹ï¼š20200702_003_init_data_student.xml CSVå‘½åè§„èŒƒï¼š[æ—¥æœŸ][åºå·]_init_data[è¡¨å].csv ç¤ºä¾‹ï¼š20200703_001_init_data_student.csv name,age,good_id ç‹,1,1 å¤§,2,3 åŠ›,3,4 æ•°æ®åº“æ–‡æ¡£ç”Ÿæˆ screw æ–‡æ¡£ä½ç½®ï¼štarget/db/doc/*.html $ mvn clean package screw:run liquibase æ–‡æ¡£ä½ç½®ï¼štarget/liquibase/dbDoc/index.html $ mvn clean package liquibase:dbDoc -Dprofiles.active=${profiles.active} -Dliquibase.password=${liquibase.password} å›æ»š å›æ»šæ“ä½œçš„å‰æå¿…é¡»æœ‰ä¸ªæ ‡è®°ä½ï¼Œè¿™é‡Œä½¿ç”¨tag æ‰“tagæ–¹æ³•1ï¼Œæ¨è éœ€è¦åœ¨ç¡®è®¤ä¸ä¼šåœ¨æ”¹åŠ¨æ•°æ®åº“è¡¨åï¼Œåœ¨ç‰ˆæœ¬/master.xmlé‡Œæ‰‹åŠ¨ä¿®æ”¹ç‰ˆæœ¬å· æ‰“tagæ–¹æ³•2 $ liquibase tag ${version} > maven æ‰“tagæ–¹æ³•3 > éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCIå·¥å…·è¦å¾—åˆ°ä¸Šæ¬¡çš„ç‰ˆæœ¬å·ï¼Œç”¨ä»¥è·å–å¯¹åº”çš„jarä¸liqubaseçš„tag > édevç¯å¢ƒï¼Œéœ€è¦æ‰§è¡Œliquibaseå‡çº§ã€å¢åŠ æ ‡ç­¾å‘½ä»¤ï¼š > å‚æ•°profiles.activeæŒ‡å®šäº†æ•°æ®åº“é…ç½®æ–‡ä»¶ä¸contextçš„ç¯å¢ƒã€‚ $ mvn clean package liquibase:updateTestingRollback liquibase:update liquibase:tag liquibase:dbDoc -Dprofiles.active=${profiles.active} -Dliquibase.password=${liquibase.password} >> æ•°æ®åº“å˜æ›´çš„é»˜è®¤ç‰ˆæœ¬ä¸pom.xmlçš„versionä¿æŒä¸€è‡´ï¼Œæ— éœ€æŒ‡å®šç‰ˆæœ¬å·(mvn liquibase:tag ~~-Dliquibase.tag=1.0.0) å›æ»šå‘½ä»¤ï¼š å‚è€ƒ https://docsstage.liquibase.com/commands/home.html å‡†å¤‡å·¥ä½œ å®‰è£…liquibase liquibaseå®‰è£…ç›®å½•/lib/åŠ å…¥mysql.jar liquibase.propertiesä½ç½®åœ¨é¡¹ç›®ä½ç½®/resources/liquibase/master.xmlçš„ä¸Šå±‚ç›®å½• æ ¹æ®å®é™…æƒ…å†µä»»é€‰ä¸€ç§ å›æ»š-æŒ‡å®štagï¼Œç«‹å³æ‰§è¡Œå›æ»šæ“ä½œ $ liquibase rollback 1.0.0 --changeLogFile=liquibase/master.xml ç”Ÿæˆå›æ»šçš„sql-æŒ‡å®štagï¼Œä¸ä¼šæ‰§è¡Œå›æ»šæ“ä½œï¼Œæ¨è $ liquibase rollbackSQL 1.0.1 --changeLogFile=liquibase/master.xml --outputFile=rollback_1.0.1.sql ç”Ÿæˆå›æ»šçš„sql-æŒ‡å®šxmlæˆ–sqlï¼Œä¸å®ç”¨ $ liquibase --changeLogFile=liquibase/master.xml --outputFile=future.txt futureRollbackSQL > mavenæ–¹å¼ 4.0ç‰ˆæœ¬å·²æ”¶è´¹ï¼ŒåºŸå¼ƒ $ mvn clean package liquibase:rollback -Dprofiles.active=${profiles.active} -Dliquibase.password=${liquibase.password} -Dliquibase.rollbackTag=${æŒ‡å®šå›æ»šåˆ°çš„æ ‡ç­¾ç‰ˆæœ¬å·} åˆ‡æ¢é¡¹ç›®åˆ†æ”¯é—®é¢˜ åœ¨å¼€å‘è¿‡ç¨‹ä¸­åˆ‡æ¢åˆ†æ”¯å¯èƒ½ä¼šå‡ºç°æ•°æ®é›†ä¸ç»Ÿä¸€é—®é¢˜ï¼Œæ¨èåˆ·æ–°æˆ–é‡æ–°åŒæ­¥æ•°æ®åº“ï¼Œå‚è€ƒå‘½ä»¤ï¼š 1.$ liquibase dropAll 2.$ liquibase update ä¸Šä¸‹æ–‡ åœ¨ä¸åŒçš„ç¯å¢ƒä¸­æ‰§è¡Œä¸åŒçš„SQL å¦‚ï¼šåœ¨DEVç¯å¢ƒä¸­æ‰§è¡Œæ’å…¥æµ‹è¯•æ•°æ®ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸æ‰§è¡Œã€‚ ç¤ºä¾‹ï¼šcontextæŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªç¯å¢ƒä¸‹æ‰æ‰§è¡Œï¼Œå¦‚å‘½ä»¤ä¸æŒ‡å®šcontextå‚æ•°ï¼Œé»˜è®¤æ‰§è¡Œã€‚ æœ€ä½³å®è·µ DEVOPSæ–¹å¼ æ›´æ–°ï¼šliquibaseçš„updateæ“ä½œäº¤ç»™liquibase-springï¼Œå³é¡¹ç›®å¯åŠ¨æ—¶å³è‡ªåŠ¨æ‰§è¡Œupdateæ“ä½œ å›æ»šï¼šåœ¨jenkinsæœåŠ¡å™¨ä¸Šå®‰è£…liquibaseå‘½ä»¤ï¼Œå•ç‹¬å»ºç«‹ä¸€ä¸ªjobï¼Œå†…å®¹ï¼šè·å–çš„é¡¹ç›®ä»£ç åˆ†æ”¯åŒè¦å‘å¸ƒçš„åˆ†æ”¯ä¿æŒä¸€è‡´ï¼Œ åˆ‡æ¢åˆ°resources/liquibase.propertiesç›®å½•ä¸‹ï¼Œä½¿ç”¨æ–¹æ³•1.å›æ»š-æŒ‡å®štagï¼Œç«‹å³æ‰§è¡Œå›æ»šæ“ä½œ é¡¹ç›®é‡Œliquibase.propertiesé‡Œä¸è¦æ¶‰åŠå¯†ç ç­‰ä¿¡æ¯ï¼Œåœ¨æ‰§è¡Œå‘½ä»¤æ—¶é€šè¿‡å‚æ•°æŒ‡å®šå¯†ç  --password å¼€å‘ã€DBAåˆ†ç¦»æ–¹å¼ æ›´æ–°ï¼šç¦ç”¨liquibase-springæ–¹å¼ï¼Œä½¿ç”¨å‘½ä»¤ç”Ÿæˆupdate.sqläº¤ç”±DBAæ‰§è¡Œï¼š$liquibase --changeLogFile=liquibase/master.xml updateSQL --outputFile=update.sql --contexts=prod å›æ»šï¼šä½¿ç”¨å›æ»šæ–¹å¼2. ç”Ÿæˆå›æ»šçš„sql-æŒ‡å®štagï¼Œä¸ä¼šæ‰§è¡Œå›æ»šæ“ä½œï¼Œæ¨èï¼Œç”Ÿæˆå›æ»šçš„sqläº¤ç”±DBAæ‰§è¡Œ é¡¹ç›®é‡Œliquibase.propertiesé‡Œä¸è¦æ¶‰åŠå¯†ç ç­‰ä¿¡æ¯ï¼Œåœ¨æ‰§è¡Œå‘½ä»¤æ—¶é€šè¿‡å‚æ•°æŒ‡å®šå¯†ç  --password Docker å¾…æ›´æ–° é—®é¢˜ liquibase-maven-plugin 3.10.1ç‰ˆæœ¬ changeLogFileè·¯å¾„æ˜¯src/main/resources/liquibase/master.xml ä¸æ”¯æŒ liquibase/master.xml changelog/1.0.0/master.xml addColumn remarkså±æ€§ä¼šä¿®æ”¹è¡¨çš„remarkså±æ€§ï¼Œéœ€è¦åœ¨ä¹‹åå¢åŠ ä¿®æ”¹è¡¨å¤‡æ³¨SQLï¼Œç‹¬ç«‹çš„changeSet https://github.com/liquibase/liquibase/issues/1210 4.0.0 æ”¯æŒincludeAllï¼Œä½†è¯¥æ ‡ç­¾ä¼šå°†ä¼šæ‰§è¡Œpathä¸‹æ‰€æœ‰å­ç›®å½•æ–‡ä»¶ï¼ˆå¦‚æŒ‡å®šåœºæ™¯ä¸‹çš„SQLæ–‡ä»¶ï¼šæ‰§è¡Œå®ŒaddColumnæ“ä½œåçš„sqlï¼Œä¼šæå‰æ‰§è¡Œï¼‰ï¼ŒæŒ‰è‡ªæ’åº(æœ‰æ½œåœ¨é£é™©)è¿›è¡Œæ‰§è¡Œï¼Œç”¨includeFileæŒ‡å®šxmlä¸sqlé¡ºåºè§£å†³ã€‚ addColumn remarkså±æ€§ä¼šä¿®æ”¹è¡¨çš„remarkså±æ€§ï¼Œç‹¬ç«‹çš„changeSetï¼Œéœ€è¦åœ¨ä¹‹åå¢åŠ ä¿®æ”¹è¡¨å¤‡æ³¨SQL https://github.com/liquibase/liquibase/issues/1210 modifyDataTypeä¼šåˆ é™¤å­—æ®µå¤‡æ³¨ spring.liquibase.tagï¼Œä¸ä¼šæ‰“tagï¼Œéœ€è¦ç”¨commandæˆ–maven pluginï¼Œæš‚æ—¶ä½¿ç”¨tagDatabaseè§£å†³ https://github.com/liquibase/liquibase/issues/1627 "},"backend/MYBATIS.html":{"url":"backend/MYBATIS.html","title":"mybatis","keywords":"","body":"mybatis sqlè¾“å‡º é»˜è®¤ä¸è¾“å‡ºï¼Œå¯é…ç½®ç¯å¢ƒå˜é‡ï¼šBOOT_ADMIN_DB_IS-PRINT-SQL service å•è¡¨CRUDï¼Œä½¿ç”¨BaseServiceå†…æä¾›çš„æ–¹æ³•ï¼Œå¦‚this.removeById(id) è°ƒç”¨mapperå†…çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œå¦‚this.baseMapper.pageVo(page) åˆ†é¡µ æ§åˆ¶å™¨pageåˆ†é¡µå‚æ•°å®šä¹‰ public ResultWrapper> pageQuery(PageParam page, @ApiParam(value = \"æ’åº\", required = true) @NotNull(message = \"æ’åºå­—æ®µä¸æ­£ç¡®\") @RequestParam StudentSortEnum sort, @ApiParam(value = \"è¯¾ç¨‹\") @RequestParam(required = false) CourseEnum course, @Validated StudentQueryCriteriaDTO query) { return ResultWrapper.ok(studentService.pageQuery(page, sort, course, query)); } serviceå¤„ç†åˆ†é¡µ public MyPage pageQuery(PageParam page, StudentSortEnum sort, CourseEnum course, StudentQueryCriteriaDTO query) { QueryWrapper queryWrapper = MybatisUtil.assemblyQueryWrapper(query); if (course != null) { queryWrapper.eq(\"course\", course); } //this.page(page, queryWrapper); return this.baseMapper.pageQuery(page, sort, queryWrapper); } mapperåˆ†é¡µ MyPage pageQuery(PageParam page, StudentSortEnum sort, @Param(Constants.WRAPPER) Wrapper wrapper); æ³¨è§£@QueryCriteriaæŸ¥è¯¢è¯´æ˜ å®šä¹‰DTOå…¥å‚ @Data public class tudentQueryCriteriaDTO{ /** * ç²¾ç¡® */ @ApiModelProperty(value = \"å§“å\") @QueryCriteria(propName = \"name\", type = QueryCriteria.Type.EQUAL) private String name; } å¼•å…¥åˆ°æ§åˆ¶å™¨å†…ï¼Œä¸è¦ä½¿ç”¨æ³¨è§£@RequestParam public ResultWrapper> pageQuery(PageParam page, @ApiParam(value = \"æ’åº\", required = true) @NotNull(message = \"æ’åºå­—æ®µä¸æ­£ç¡®\") @RequestParam StudentSortEnum sort, @ApiParam(value = \"è¯¾ç¨‹\") @RequestParam(required = false) CourseEnum course, @Validated StudentQueryCriteriaDTO query) { return ResultWrapper.ok(studentService.pageQuery(page, sort, course, query)); } è½¬æ¢å¾—åˆ°æŸ¥è¯¢æ¡ä»¶æ„é€ å™¨queryWrapper è‡ªå®šä¹‰sqlæ–¹å¼ public MyPage pageQuery(PageParam page, StudentSortEnum sort, CourseEnum course, StudentQueryCriteriaDTO query) { QueryWrapper queryWrapper = MybatisUtil.assemblyQueryWrapper(query); if (course != null) { queryWrapper.eq(\"course\", course); } return this.baseMapper.pageQuery(page, sort, queryWrapper); } mybatis plus CRUDæ¥å£æ–¹å¼ public List queryAll(JobQueryCriteriaDTO criteria) { QueryWrapper queryWrapper = MybatisUtil.assemblyQueryWrapper(criteria); return this.list(queryWrapper); } é€»è¾‘åˆ é™¤ å¦‚æœå­—æ®µä½¿ç”¨å”¯ä¸€ç´¢å¼•ï¼Œè¢«é€»è¾‘åˆ é™¤åï¼Œå¦‚æœå†æ¬¡æ’å…¥ä¼šå¤±è´¥ï¼Œè¿™é‡Œçš„å”¯ä¸€ç´¢å¼•è¦å’Œé€»è¾‘åˆ é™¤ï¼Œå†åŠ å…¶å®ƒå”¯ä¸€å­—æ®µï¼ˆé˜²æ­¢å†æ¬¡è¢«åˆ é™¤ï¼‰åšè”åˆç´¢å¼•å¯è§£å†³ ä¿®æ”¹äººå­—æ®µä¸ä¼šä¿®æ”¹ï¼Œè§£å†³æ–¹æ³• /** æ ¹æ®idé€»è¾‘åˆ é™¤*/ StudentDO studentDO = new StudentDO(); studentDO.setId(1L); this.baseMapper.deleteByIdWithFill(studentDO); #this.removeByIdWithFill(studentDO); /**æ ¹æ®idsé€»è¾‘åˆ é™¤*/ studentDO = new StudentDO(); Wrapper wrapper = Wrappers.lambdaQuery().in(StudentDO::getId, 1, 3); this.removeBatchWithFill(studentDO, wrapper); /**æ ¹æ®è‡ªå®šä¹‰æ¡ä»¶ï¼Œé€»è¾‘æ‰¹é‡åˆ é™¤*/ studentDO = new StudentDO(); Set ids = CollUtil.newHashSet(3L, 4L); this.removeBatchByIdsWithFill(studentDO, ids); å‚è€ƒ https://blog.csdn.net/yuanlintufang/article/details/106180260 https://blog.csdn.net/qq_39313596/article/details/101039964 https://mybatis.plus/guide/faq.html#%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4%E4%B8%8B-%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85-%E5%8A%9F%E8%83%BD%E6%B2%A1%E6%9C%89%E6%95%88%E6%9E%9C æšä¸¾æ”¯æŒ è¡¨ç¤ºçŠ¶æ€çš„å­—æ®µï¼Œå¦‚é”å®šï¼Œæ­£å¸¸ï¼Œåˆ é™¤ç­‰ï¼Œå»ºè®®å®šä¹‰æšä¸¾è¡¨ç¤ºï¼Œå‚è§ã€æšä¸¾å®šä¹‰è§„èŒƒã€‘ IPage pageVo(Page page, @Param(\"name\") String name, @Param(\"course\") CourseEnum courseEnum); SELECT * FROM students WHERE name LIKE concat('%',#{name},'%') WHERE course = #{course} æ”¯æŒåŠ¨æ€æ’åºæšä¸¾ å®šä¹‰æ’åºæšä¸¾ /** * * å­¦ç”Ÿ æ’åºæšä¸¾ * * * @author miaoyj * @since 2021-02-02 * @version 1.0.0-SNAPSHOT */ @Getter @AllArgsConstructor public enum StudentSortEnum{ /** * ä¸»é”® */ ID_DESC(\"id DESC\", \"idå€’åº\"), ID_ASC(\"id ASC\", \"idæ­£åº\"), ; /** * Constant MAPPINGS */ private static final Map MAPPINGS; static { Map temp = new HashMap(); for (StudentSortEnum courseEnum : values()) { temp.put(courseEnum.value, courseEnum); } MAPPINGS = Collections.unmodifiableMap(temp); } @JsonValue private final String value; private final String desc; /** * * æ ¹æ®indexè·å–æšä¸¾ * * * @param index a String * @return æšä¸¾ */ @JsonCreator(mode = JsonCreator.Mode.DELEGATING) public static StudentSortEnum resolve(String index) { return MAPPINGS.get(index); } } æšä¸¾ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°mapperï¼Œå³å¯è‡ªåŠ¨æ’å…¥æ’åºè¯­å¥List queryAll(StudentSortEnum sort, @Param(Constants.WRAPPER) Wrapper wrapper); MyBatisè¯»å–å¤§é‡æ•°æ®ï¼ˆæµå¼è¯»å–ï¼‰ å¯¼å‡ºå¤§é‡æ•°æ®æ—¶ï¼Œè™šæ‹Ÿæœºé¢‘ç¹GCï¼Œå†…å­˜è€—å°½ï¼ŒCPUçˆ†æ»¡ï¼Œå¯é‡‡ç”¨Mybatisæ•°æ®æµå¼è¯»å–è¿›è¡Œä¼˜åŒ–ã€‚ åœºæ™¯ï¼šjavaç«¯ä»æ•°æ®åº“è¯»å–100Wæ•°æ®è¿›è¡Œåå°ä¸šåŠ¡å¤„ç†ã€‚ åˆ†é¡µè¯»å–å‡ºæ¥ã€‚ç¼ºç‚¹ï¼šéœ€è¦æ’åºååˆ†é¡µè¯»å–ï¼Œæ€§èƒ½ä½ä¸‹ã€‚ ä¸€æ¬¡æ€§è¯»å–å‡ºæ¥ã€‚ç¼ºç‚¹ï¼šéœ€è¦å¾ˆå¤§å†…å­˜ï¼Œä¸€èˆ¬è®¡ç®—æœºä¸è¡Œã€‚ å»ºç«‹é•¿è¿æ¥ï¼Œåˆ©ç”¨æœåŠ¡ç«¯æ¸¸æ ‡ï¼Œä¸€æ¡ä¸€æ¡æµå¼è¿”å›ç»™javaç«¯ã€‚ jdbcä¸­æœ‰ä¸ªé‡è¦çš„å‚æ•°fetchSizeï¼ˆå®ƒå¯¹ä¸šåŠ¡å®ç°æ— å½±å“ï¼Œå³ä¸ä¼šé™åˆ¶è¯»å–æ¡æ•°ç­‰ï¼‰ï¼Œä¼˜åŒ–åå¯æ˜¾è‘—æå‡æ€§èƒ½ã€‚ JDBCä¸‰ç§è¯»å–æ–¹å¼ï¼š ä¸€æ¬¡å…¨éƒ¨ï¼ˆé»˜è®¤ï¼‰ï¼šä¸€æ¬¡è·å–å…¨éƒ¨ã€‚ æµå¼ï¼šå¤šæ¬¡è·å–ï¼Œä¸€æ¬¡ä¸€è¡Œã€‚ æ¸¸æ ‡ï¼šå¤šæ¬¡è·å–ï¼Œä¸€æ¬¡å¤šè¡Œã€‚ Mapperå±‚ SELECT * FROM students Daoå±‚void exportAll(ResultHandler handler); Serviceå±‚this.baseMapper.exportAll(resultContext -> { StudentVO studentVO = resultContext.getResultObject(); list.add(studentVO); }); åŸç†åˆ†æ å…ˆåœ¨æœåŠ¡ç«¯æ‰§è¡ŒæŸ¥è¯¢åå°†æ•°æ®ç¼“å­˜åœ¨æœåŠ¡ç«¯ã€‚ï¼ˆè€—æ—¶ç›¸å¯¹è¾ƒé•¿ï¼‰ javaç«¯è·å–æ•°æ®æ—¶ï¼Œåˆ©ç”¨æœåŠ¡ç«¯æ¸¸æ ‡è¿›è¡ŒæŒ‡é’ˆè·³åŠ¨ï¼Œå¦‚æœfetchSizeä¸º1000ï¼Œåˆ™ä¸€æ¬¡æ€§è·³åŠ¨1000æ¡ï¼Œè¿”å›ç»™javaç«¯ç¼“å­˜èµ·æ¥ã€‚ï¼ˆè€—æ—¶è¾ƒçŸ­ï¼Œè·³åŠ¨æ¬¡æ•°ä¸ºN/1000ï¼‰ åœ¨è°ƒç”¨nextå‡½æ•°æ—¶ï¼Œä¼˜å…ˆä»ç¼“å­˜ä¸­å–æ•°ï¼Œå…¶æ¬¡æ‰§è¡Œ2è¿‡ç¨‹ã€‚ï¼ˆå†…å­˜è¯»å–ï¼Œè€—æ—¶å¯å¿½ç•¥ï¼‰ https://mybatis.plus/guide/quick-start.html#%E7%BC%96%E7%A0%81 > æ‹¦æˆªsqlé‡Œçš„eté—®é¢˜ï¼ŒBaseMapper ä»£ç ç”Ÿæˆå™¨ > é…ç½®æ–‡ä»¶ï¼šmybatis-plus-maven-plugin.properties > ç”Ÿæˆå‘½ä»¤: ~~ ~~$ mvn properties:read-project-properties boot-mybatis-plus:generate -X >å°†Controlleré‡Œ@RequestMappingçš„valueå­—æ®µä¿®æ”¹ä¸ºswaggeræ‰«æçš„å­—æ®µï¼Œå¦‚ï¼šDemoApiConstant.API_URL + \"/students\" > éœ€è¦é€»è¾‘åˆ é™¤å­—æ®µçš„ï¼Œåœ¨ç”Ÿæˆentityåä¿®æ”¹ç»§æ‰¿ä¸ºBaseEntityLogicDelete "},"backend/SECURITY.html":{"url":"backend/SECURITY.html","title":"æƒé™éªŒè¯","keywords":"","body":"æƒé™éªŒè¯ æ³¨è§£éªŒè¯ @PreAuthorize(\"@el.check('student:list')\") @GetMapping @ApiOperation(value = \"å­¦ç”Ÿ-åˆ—è¡¨\", tags = ApiVersion.VERSION_1_0_0) @PreAuthorize(\"@el.check('student:list')\") @LogRecordAnnotation( value = \"åˆ—è¡¨\", category = LogCategoryType.MANAGER, type = LogType.SELECT, module = ApiVersion.MODULE_STUDENT ) public ResultWrapper> pageQuery() æ³¨è§£å¿½ç•¥ @AnonymousDeleteMappingã€@AnonymousGetMappingã€@AnonymousPostMappingã€@AnonymousPutMapping åŸç†è¯´æ˜ å‰ç«¯ Permission/permission.jså–åˆ°æ ‡ç­¾é‡Œçš„æƒé™æ ‡è¯†æˆ–è§’è‰²ä¸infoæ¥å£é‡Œçš„rolesåšæ¯”è¾ƒ(store/getter.jså­˜å‚¨permission.jsé‡Œéœ€è¦çš„å†…å®¹) åç«¯ token.authåŒ…å«æƒé™æ ‡è¯†ï¼Œåœ¨TokenFilteré‡Œä»tokenå–å‡ºauthè®¾ç½®åˆ°äº†Spring Securityä¸Šä¸‹æ–‡ä¸­ Authentication authentication = tokenProvider.getAuthentication(token); SecurityContextHolder.getContext().setAuthentication(authentication); ç”¨æˆ·è®¤è¯ å¯†ç ç™»å½• çŸ­ä¿¡ç™»å½• å…¶å®ƒæ–¹å¼æ‰©å±•å¯å‚è€ƒä»¥ä¸Š2ç§æ–¹å¼çš„ä»£ç  è·å–ç™»å½•ä¿¡æ¯ SecurityUtils.java é…ç½® å‰ç¼€ boot.admin.security. å»ºè®®å„ç¯å¢ƒä¸è¦ä½¿ç”¨ç›¸åŒçš„jwt.secret å‚æ•° è¯´æ˜ é»˜è®¤å€¼ ä¸¾ä¾‹ exclude-urls å¿½ç•¥æ‹¦æˆªçš„åœ°å€ï¼Œæ•°ç»„ æ—  - /demo/students/** role-urls è§’è‰²ä¸urlå¯¹åº”å…³ç³»ï¼Œæ•°ç»„ æ—  - role-name: ROLE_USER urls: - /demo/students/listPage jwt.secret tokenå¯†é’¥ secret abc jwt.access-token-expiration tokenè¿‡æœŸæ—¶é—´(æ¯«ç§’) 7200000/2å°æ—¶ 7200000 jwt.refresh-token-expiration tokenåˆ·æ–°è¿‡æœŸæ—¶é—´(æ¯«ç§’) 7200000/2å°æ—¶ 7200000 jwt.token-header æˆæƒæ‰€åœ¨çš„headerå‚æ•°åç§° Authorization auth "},"backend/SWAGGER.html":{"url":"backend/SWAGGER.html","title":"æ¥å£æ–‡æ¡£","keywords":"","body":"æ¥å£æ–‡æ¡£ äº†è§£æ›´å¤šå‚è€ƒï¼šhttps://doc.xiaominfo.com/ ä¼ è¾“ç±» DTOä¸ºè¾“å…¥ä¸ä¼ è¾“ç±»ï¼Œ@ApiModelPropertyå®šä¹‰åç§°ã€ç¤ºä¾‹ã€æ˜¯å¦å¿…å¡« @Data public class LoginDTO implements Serializable { @ApiModelProperty(value = \"ç”¨æˆ·æ˜µç§°\", example = \"å¤§åŠ›\", required = true) private String nickname; @ApiModelProperty(value = \"æ‰‹æœºå·\", example = \"11111111111\", required = true) private String telephone; @ApiModelProperty(value = \"è¯¾ç¨‹ç±»å‹\", example = \"101\", required = true) private CourseEnum courseEnum; } VO(è¾“å‡ºç±»)ï¼Œ@ApiModelPropertyå®šä¹‰åç§° @Data @NoArgsConstructor public class LoginVO implements Serializable { @ApiModelProperty(value = \"ç”¨æˆ·æ˜µç§°\") private String name; @ApiModelProperty(value = \"æ‰‹æœºå·\", example = \"11111111111\") private String telephone; @ApiModelProperty(value = \"è¯¾ç¨‹ç±»å‹\", example = \"101\") private CourseEnum courseEnum; } æ§åˆ¶å™¨ å®šä¹‰@Apiå®šä¹‰åç§°,@ApiSupportå®šä¹‰é¡ºåºä¸ä½œè€… @Api(tags = \"å¹³å°å•†å“\") @ApiSupport(order = 1, author = \"miaoyj\") @RestController @RequestMapping(value = DemoApiConstant.URL + \"/good/plf-good\", produces = MediaType.APPLICATION_JSON_VALUE) public class DemoController {} æ³¨æ„@RequestParamå±æ€§requiredé»˜è®¤ä¸ºtrueï¼Œ@ApiOperationå®šä¹‰æ–¹æ³•åç§°, @ApiParamå®šä¹‰å‚æ•°è¯´æ˜ï¼Œå±æ€§requiredé»˜è®¤ä¸ºfalse @GetMapping @ApiOperation(value = \"åˆ—è¡¨\") public List list(@ApiParam(value = \"å•†å“åç§°\", required = false) @RequestParam(required = false) String plfName) { return plfGoodService.listPlfGoods(plfName); } @RequestBodyå‚æ•°å®šä¹‰åœ¨DTOå†…ï¼Œ@ApiOperationå®šä¹‰æ–¹æ³•åç§° @PostMapping(\"testPOSTParamsValid\") @ApiOperation(value = \"POSTè¯·æ±‚ï¼Œè‡ªå®šä¹‰éªŒè¯æ¶ˆæ¯\") public void testParamValid(@RequestBody LoginDTO loginBO) { StaticLog.debug(\"loginBO:{}\", loginBO); } å¿…é¡»æ·»åŠ ï¼Œ@ApiOperationçš„tagsä¸ºæœ¬æ¬¡çš„ç‰ˆæœ¬å· @ApiOperation(value = \"ç”¨æˆ·åˆ†é¡µ1\", tags = DemoApiVersionConstant.VERSION_1_8_7) åˆ†é¡µã€æšä¸¾å‚æ•° PageParamåŒ…å«å­—æ®µï¼šé¡µç ã€æ¯é¡µæ•°é‡ï¼Œå¯é…åˆæ’åºæšä¸¾å­—æ®µä½¿ç”¨ public ResultWrapper> pageQuery(PageParam page, @ApiParam(value = \"æ’åº\", required = true) @NotNull(message = \"æ’åºå­—æ®µä¸æ­£ç¡®\") @RequestParam StudentSortEnum sort, @ApiParam(value = \"è¯¾ç¨‹\") @RequestParam(required = false) CourseEnum course, @Validated StudentQueryCriteriaDTO query) {} è¿‡æ»¤è¯·æ±‚å‚æ•° https://doc.xiaominfo.com/knife4j/ignoreParameter.html åŒ…å«è¯·æ±‚å‚æ•° https://doc.xiaominfo.com/knife4j/includeParameter.html "},"backend/VALIDATE.html":{"url":"backend/VALIDATE.html","title":"æ¥å£éªŒè¯","keywords":"","body":"å‚æ•°éªŒè¯ æ§åˆ¶å™¨å±‚ Controller ç»§æ‰¿BaseController public class PlfGoodController extends BaseController @RequestParamå‚æ•°å±æ€§requiredä¸ºtrue å‚æ•°åä¸ä¼ æ—¶ï¼Œéç©ºéªŒè¯æ‰ç”Ÿæ•ˆ @GetMapping(\"testGetParamValid\") public void testParamValid(@ApiParam(value = \"ç”¨æˆ·å\", required = true) @RequestParam String name, @ApiParam(value = \"æ€§åˆ«\", required = true) @RequestParam Integer sex) @RequestParamå‚æ•°ï¼Œè‡ªå®šä¹‰éªŒè¯æ¶ˆæ¯ å‚æ•°å­˜åœ¨ä¸”æ— å€¼ï¼ŒéªŒè¯è‡ªå®šä¹‰æ¶ˆæ¯æ‰æœ‰æ•ˆ éªŒè¯ æšä¸¾ç±»å‹ æ—¶å¿…é¡»å¢åŠ éªŒè¯æ³¨è§£ï¼Œæ‰ä¼šç”Ÿæ•ˆï¼ŒRequestParam.required = trueè§£å†³äº†å±æ€§å¿…é¡»ï¼ŒéªŒè¯æ³¨è§£å¯è§£å†³å€¼ä¸€å®šæ˜¯æšä¸¾é‡Œæ‰€å®šä¹‰çš„ @GetMapping(\"testGetParamCustomMsgValid\") public void testGetParamCustomMsgValid(@ApiParam(value = \"ç”¨æˆ·å\", required = true) @NotBlank(message = \"ç”¨æˆ·åä¸èƒ½ä¸ºç©º\") @RequestParam(required = true) String name, @ApiParam(value = \"æ€§åˆ«\", required = true) @NotNull(message = \"æ€§åˆ«ä¸èƒ½ä¸ºç©º\") @RequestParam(required = true) Integer sex, @ApiParam(value = \"è¯¾ç¨‹ç±»å‹\", required = true) @NotNull(message = \"è¯¾ç¨‹ç±»å‹ä¸æ­£ç¡®\") @RequestParam(required = true) CourseEnum courseEnum ) POST/GETè¯·æ±‚ï¼Œè‡ªå®šä¹‰éªŒè¯æ¶ˆæ¯ @Validated GETè¯·æ±‚ä¸è¦åŠ @RequestBody æ‰€æœ‰éœ€è¦éªŒè¯çš„å±æ€§ï¼Œmessageä¸èƒ½ä¸ºç©º @NotEmpty ç”¨åœ¨é›†åˆä¸Šé¢ @NotBlankç”¨åœ¨Stringä¸Šé¢ @NotNullç”¨åœ¨åŸºæœ¬æ•°æ®ç±»å‹ä¸Šé¢ @PostMapping(\"testPOSTParamsValid\") public void testPOSTParamsValid(@Validated @RequestBody LoginDTO loginDTO) @GetMapping(\"testPOSTParamsValid\") public void testGetParamsValid(@Validated LoginDTO loginDTO) /** * * ç™»å½•å…¥å‚ * * * @author miaoyj * @since 2020-07-09 * @version 1.0.0-SNAPSHOT */ @Data public class LoginDTO implements Serializable { @ApiModelProperty(value = \"ç”¨æˆ·æ˜µç§°\", example = \"å¤§åŠ›\", required = true) @NotBlank(message = \"ç”¨æˆ·æ˜µç§°ä¸èƒ½ä¸ºç©º\") private String nickname; @ApiModelProperty(value = \"æ‰‹æœºå·\", example = \"11111111111\", required = true) @NotBlank(message = \"æ‰‹æœºå·ä¸èƒ½ä¸ºç©º\") @Length(min = 11, max = 11, message = \"æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®\") private String telephone; @ApiModelProperty(value = \"è¯¾ç¨‹ç±»å‹\", example = \"101\", required = true) private CourseEnum courseEnum; } ä¸šåŠ¡å±‚é€»è¾‘éªŒè¯ ä¾‹ï¼šAssert.isTrue(false, \"åˆåŒå·ä¸èƒ½ä¸ºç©º\");[æ›´å¤šç”¨æ³•][hutool.Assert] public void testAssert() { Assert.isTrue(false, \"åˆåŒå·ä¸èƒ½ä¸ºç©º\"); StaticLog.info(\"testAssert\"); } åˆ†ç»„éªŒè¯ å¿…é¡»ç»§æ‰¿BaseDTO ä½¿ç”¨åœºæ™¯ï¼šåŒä¸€ä¸ªDTOï¼Œæ–°å¢idéå¿…ä¼ ï¼Œä¿®æ”¹æ—¶idå¿…ä¼  @Data public class SampleTempDTO extends BaseDTO { @NotNull(message = \"idä¸èƒ½ä¸ºç©º\", groups = Update.class) private Long id; private String cardNo; } //æ–°å¢ public ResultWrapper add(@Validated @RequestBody SampleBatchDTO dto){} //ä¿®æ”¹ public ResultWrapper update(@Validated(BaseDTO.Update.class)@RequestBody SampleBatchDTO dto){} "},"backend/ENV.html":{"url":"backend/ENV.html","title":"ç³»ç»Ÿç¯å¢ƒå˜é‡","keywords":"","body":"ç¯å¢ƒå˜é‡ å˜é‡å é»˜è®¤å€¼ åˆ†ç±» è¯´æ˜ BOOT_ADMIN_WEB_PORT 8801 SERVER æœåŠ¡ç«¯å£ BOOT_ADMIN_WEB_PROFILES_ACTIVE dev SERVER ç¯å¢ƒï¼Œå¯é€‰ï¼ˆdev, qa, demo, prodï¼‰ BOOT_ADMIN_DB_HOST localhost DB æ•°æ®åº“åœ°å€ BOOT_ADMIN_DB_DATABASE boot-admin DB æ•°æ®åº“å BOOT_ADMIN_DB_UNAME root DB æ•°æ®åº“ç”¨æˆ· BOOT_ADMIN_DB_PASSWORD DB æ•°æ®åº“å¯†ç  BOOT_ADMIN_DB_PORT 3306 DB æ•°æ®åº“ç«¯å£ BOOT_ADMIN_DB_IS-PRINT-SQL false DB æ˜¯å¦æ‰“å°sql BOOT_ADMIN_REDIS_DB 1 REDIS redisæ•°æ®åº“å BOOT_ADMIN_REDIS_HOST localhost REDIS redisåœ°å€ BOOT_ADMIN_REDIS_PORT redis REDIS redisç«¯å£ BOOT_ADMIN_REDIS_PASSWORD 6379 REDIS rediså¯†ç  BOOT_ADMIN_LOG_PATH ./logs æ—¥å¿— æ—¥å¿—è·¯å¾„ BOOT_ADMIN_FILTER_ENCRYPTION_FIELD_SECRET-KEY YgnE7hAjiifYFibD è¿‡æ»¤å™¨ å­—æ®µåŠ å¯†ï¼Œå¯†é’¥ BOOT_ADMIN_SBA_PASSWORD 3nxnn4mtLyzn SBA spring-boot-adminå¯†ç  BOOT_ADMIN_SBA_SERVER_URL http://localhost:${server.port} SBA spring-boot-adminæ³¨å†Œçš„æœåŠ¡ç«¯åœ°å€ BOOT_ADMIN_USER_PASSWORD_DEFAULT-VAL 123456 USER æ–°ç”¨æˆ·é»˜è®¤å¯†ç  BOOT_ADMIN_SECURITY_JWT_BASE64-SECRET * USER jwt_security BOOT_ADMIN_MAVEN_URL MAVEN mavenä»“åº“åœ°å€å¦‚ï¼šhttp://x.x.x.x:1111/repository "},"backend/SBA.html":{"url":"backend/SBA.html","title":"æœåŠ¡ç›‘æ§","keywords":"","body":"spring-boot-admin å½“å‰æœåŠ¡å³æ˜¯å®¢æˆ·ç«¯ä¹Ÿæ˜¯æœåŠ¡ç«¯ï¼Œç›‘æ§æœåŠ¡è¿è¡ŒçŠ¶æ€ å¦‚éœ€ç‹¬ç«‹spring-boot-adminæœåŠ¡ç«¯ç›‘æ§å¤šä¸ªæœåŠ¡ï¼Œå¯å¯åŠ¨boot-admin-sba-serverï¼Œä¿®æ”¹ç¯å¢ƒå˜é‡BOOT_ADMIN_SBA_SERVER_URLä¸ºspring-boot-adminæœåŠ¡ç«¯çš„åœ°å€å³å¯ è®¿é—®http://localhost:8801/sba/ï¼Œ è¿›å…¥å®ä¾‹ devç¯å¢ƒæ— å¯†ç ï¼Œå…¶å®ƒç¯å¢ƒå¿…é¡»æä¾›å¯†ç ï¼Œé…ç½®è·¯å¾„å‚è§ã€ç¯å¢ƒå˜é‡ã€‘ é¡¹ç›®ä¿¡æ¯ï¼ŒGITæœ€è¿‘ä¸€æ¬¡çš„æäº¤è®°å½• knife4jæ¥å£æ–‡æ¡£å…¥å£ druidæ•°æ®åº“ç›‘æ§å…¥å£ æ—¥å¿—ï¼ˆDEVç¯å¢ƒä¸ä¼šäº§ç”Ÿæ—¥å¿—æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸èƒ½æŸ¥çœ‹ï¼Œå¯åˆ‡æ¢åˆ°å…¶å®ƒç¯å¢ƒéªŒè¯æ—¥å¿—ï¼‰ å†ä¹Ÿä¸ç”¨åˆ°æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹æ—¥å¿—äº† å…¶å®ƒå¦‚ç¯å¢ƒå˜é‡ï¼Œé…ç½®æ–‡ä»¶ç­‰ç›‘æ§å¯è‡ªè¡Œæ‘¸ç´¢ "},"backend/CODE-GENERATOR.html":{"url":"backend/CODE-GENERATOR.html","title":"ä»£ç ç”Ÿæˆ","keywords":"","body":"ä»£ç ç”Ÿæˆ è¿™é‡Œæ‹¿studentè¡¨åšç”Ÿæˆç¤ºä¾‹ åœ¨æ•°æ®åº“ç®¡ç†å·¥å…·ä¸­å°†studentè¡¨å¤åˆ¶å¹¶é‡å‘½åä¸ºteacher ç‚¹å‡»é…ç½® é…ç½®æ¥å£ä¿¡æ¯ é…ç½®å­—æ®µï¼Œç”Ÿæˆ ä»£ç ç”Ÿæˆå®Œæˆ å‰ç«¯ä»£ç é…ç½® ç§»åŠ¨teacher/api.jsåˆ°boot-admin-ui/src/apiä¸‹ï¼Œç§»åŠ¨teacher/index.vueåˆ°boot-admin-ui/src/views/system/ä¸‹ æ‰‹åŠ¨æ‰§è¡Œsql/TeacherMenuRoleSql.sqlï¼ˆå›æ»šsqlå·²æ³¨é‡Šï¼‰ï¼Œæ·»åŠ èœå•ã€æƒé™èµ‹äºˆè¶…çº§ç®¡ç†å‘˜è§’è‰²ï¼ˆä¸€èˆ¬è¿™æ®µsqlä¼šç”±liquibaseè‡ªåŠ¨æ‰§è¡Œï¼‰ é‡å¯åç«¯boot-admin-web-demoï¼Œåˆ·æ–°ç¼“å­˜æ–¹æ³•ï¼Œä»»é€‰ä¸€ç§ ç”¨æˆ·é€€å‡ºå†ç™»å½•å‰ç«¯é¡µé¢ ç®¡ç†å‘˜åˆ°èœå•->è§’è‰²ç®¡ç†->è¶…çº§ç®¡ç†å‘˜->èœå•åˆ†é…->ä¿å­˜ æœ€ç»ˆæ•ˆæœ "},"backend/XXL-JOB-CLIENT.html":{"url":"backend/XXL-JOB-CLIENT.html","title":"xxl-job-client","keywords":"","body":"XXL-JOB å®¢æˆ·ç«¯ é…ç½® å‰ç¼€ boot.admin.xxl.job. å‚æ•° è¯´æ˜ é»˜è®¤å€¼ admin.addresses æœåŠ¡åœ°å€ http://localhost:8888/xxl-job-admin accessToken æœåŠ¡ä»¤ç‰Œ æ—  executor.appname å®¢æˆ·ç«¯åç§° ${spring.application.name} executor.address å®¢æˆ·ç«¯åœ°å€ æ—  executor.ip å®¢æˆ·ç«¯IP æ—  executor.port å®¢æˆ·ç«¯ç«¯å£ 9999 executor.logretentiondays å®¢æˆ·ç«¯æ—¥å¿—ä¿å­˜æ—¶é•¿ 30 executor.logpath å®¢æˆ·ç«¯æ—¥å¿—åœ°å€ ${log.path:./logs/} "}}